# 12. íƒ‘ë§ˆì¼€íŒ… ì„¤ì¹˜ ê°€ì´ë“œ

**ìµœì¢… ìˆ˜ì •ì¼:** 2025-06-02 21:30:00 KST

ì´ ë¬¸ì„œëŠ” íƒ‘ë§ˆì¼€íŒ… í”„ë¡œì íŠ¸ë¥¼ ì²˜ìŒë¶€í„° ì„¤ì¹˜í•˜ëŠ” ì „ì²´ ê³¼ì •ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­](#ì‹œìŠ¤í…œ-ìš”êµ¬ì‚¬í•­)
2. [ì‚¬ì „ ì¤€ë¹„](#ì‚¬ì „-ì¤€ë¹„)
3. [í”„ë¡œì íŠ¸ íŒŒì¼ ë°°í¬](#í”„ë¡œì íŠ¸-íŒŒì¼-ë°°í¬)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ì •)
5. [ì›¹ì„œë²„ ì„¤ì •](#ì›¹ì„œë²„-ì„¤ì •)
6. [ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰](#ì„¤ì¹˜-ìŠ¤í¬ë¦½íŠ¸-ì‹¤í–‰)
7. [ì´ˆê¸° ì„¤ì •](#ì´ˆê¸°-ì„¤ì •)
8. [ì„¤ì¹˜ í™•ì¸](#ì„¤ì¹˜-í™•ì¸)
9. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ğŸ–¥ï¸ ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

### ìš´ì˜ì²´ì œ
- CentOS 7.9 ì´ìƒ
- Ubuntu 18.04 ì´ìƒ
- Red Hat Enterprise Linux 7 ì´ìƒ

### ì›¹ì„œë²„
- Apache 2.4.6 ì´ìƒ
- Nginx 1.14 ì´ìƒ (ì„ íƒì‚¬í•­)

### ë°ì´í„°ë² ì´ìŠ¤
- MariaDB 10.6.5 ì´ìƒ
- MySQL 8.0 ì´ìƒ

### PHP
- PHP 8.0.30 ì´ìƒ
- í•„ìˆ˜ í™•ì¥ ëª¨ë“ˆ:
  - PDO
  - PDO_MySQL
  - MySQLi
  - cURL
  - JSON
  - MBString
  - OpenSSL

### ë„¤íŠ¸ì›Œí¬
- SSL ì¸ì¦ì„œ (HTTPS í•„ìˆ˜)
- ë°©í™”ë²½ ì„¤ì • (í¬íŠ¸ 80, 443 ì—´ë¦¼)

---

## ğŸ”§ ì‚¬ì „ ì¤€ë¹„

### 1. ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
```bash
# CentOS/RHEL
sudo yum update -y

# Ubuntu/Debian
sudo apt update && sudo apt upgrade -y
```

### 2. í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
# CentOS/RHEL
sudo yum install -y httpd mariadb-server php php-pdo php-mysql php-curl php-json php-mbstring

# Ubuntu/Debian
sudo apt install -y apache2 mariadb-server php php-pdo php-mysql php-curl php-json php-mbstring
```

### 3. ì„œë¹„ìŠ¤ ì‹œì‘ ë° ìë™ì‹œì‘ ì„¤ì •
```bash
# Apache ë° MariaDB ì‹œì‘
sudo systemctl start httpd mariadb
sudo systemctl enable httpd mariadb

# Ubuntuì˜ ê²½ìš° apache2
sudo systemctl start apache2 mariadb
sudo systemctl enable apache2 mariadb
```

---

## ğŸ“ í”„ë¡œì íŠ¸ íŒŒì¼ ë°°í¬

### 1. ì›¹ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì¤€ë¹„
```bash
# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±
sudo mkdir -p /var/www/html/topmkt
sudo chown apache:apache /var/www/html/topmkt  # CentOS
# sudo chown www-data:www-data /var/www/html/topmkt  # Ubuntu

# ê¶Œí•œ ì„¤ì •
sudo chmod 755 /var/www/html/topmkt
```

### 2. Git í´ë¡  ë˜ëŠ” íŒŒì¼ ë³µì‚¬
```bash
# Gitì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
cd /var/www/html
sudo git clone [ë ˆí¬ì§€í† ë¦¬_URL] topmkt

# íŒŒì¼ì„ ì§ì ‘ ë³µì‚¬í•˜ëŠ” ê²½ìš°
sudo cp -r /path/to/project/* /var/www/html/topmkt/
```

### 3. ë””ë ‰í† ë¦¬ ê¶Œí•œ ì„¤ì •
```bash
cd /var/www/html/topmkt

# ë¡œê·¸ ë° ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„±
sudo mkdir -p logs uploads
sudo chown -R apache:apache logs uploads  # CentOS
# sudo chown -R www-data:www-data logs uploads  # Ubuntu

sudo chmod -R 755 logs uploads
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •

### 1. MariaDB ë³´ì•ˆ ì„¤ì •
```bash
sudo mysql_secure_installation
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ë° ì‚¬ìš©ì ìƒì„±
```bash
# MySQL/MariaDB ì ‘ì†
sudo mysql -u root -p

# ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
CREATE DATABASE topmkt CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

# ì‚¬ìš©ì ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬
CREATE USER 'topmkt_user'@'localhost' IDENTIFIED BY 'your_secure_password';
GRANT ALL PRIVILEGES ON topmkt.* TO 'topmkt_user'@'localhost';
FLUSH PRIVILEGES;

# ì—°ê²° í…ŒìŠ¤íŠ¸
USE topmkt;
EXIT;
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì • í™•ì¸
```bash
# db_test.phpë¡œ ì—°ê²° í…ŒìŠ¤íŠ¸
cd /var/www/html/topmkt
curl -k https://your-domain.com/db_test.php
```

---

## ğŸŒ ì›¹ì„œë²„ ì„¤ì •

### 1. Apache ê°€ìƒ í˜¸ìŠ¤íŠ¸ ì„¤ì •
```bash
# ê°€ìƒ í˜¸ìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
sudo nano /etc/httpd/conf.d/topmkt.conf

# ë‹¤ìŒ ë‚´ìš© ì¶”ê°€:
<VirtualHost *:80>
    ServerName your-domain.com
    DocumentRoot /var/www/html/topmkt/public
    Redirect permanent / https://your-domain.com/
</VirtualHost>

<VirtualHost *:443>
    ServerName your-domain.com
    DocumentRoot /var/www/html/topmkt/public
    
    SSLEngine on
    SSLCertificateFile /path/to/certificate.crt
    SSLCertificateKeyFile /path/to/private.key
    
    <Directory /var/www/html/topmkt/public>
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
```

### 2. .htaccess ì„¤ì •
```bash
# public/.htaccess íŒŒì¼ í™•ì¸
cd /var/www/html/topmkt/public
cat .htaccess

# RewriteEngineì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
```

### 3. Apache ì¬ì‹œì‘
```bash
sudo systemctl restart httpd
```

---

## ğŸš€ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

### 1. ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì„¤ì¹˜ í˜ì´ì§€ ì ‘ì†
```
https://your-domain.com/install.php
```

### 2. ì„¤ì¹˜ ê³¼ì • í™•ì¸
ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ê°€ ë‹¤ìŒ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:

#### âœ… ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±
- `users` - ì‚¬ìš©ì ì •ë³´
- `sessions` - ì„¸ì…˜ ê´€ë¦¬
- `logs` - ì‹œìŠ¤í…œ ë¡œê·¸
- `verification_codes` - ì¸ì¦ë²ˆí˜¸
- `posts` - ê²Œì‹œê¸€
- `comments` - ëŒ“ê¸€
- `settings` - ì‹œìŠ¤í…œ ì„¤ì •

#### âœ… ì¸ë±ìŠ¤ ë° ì™¸ë˜í‚¤ ì„¤ì •
- ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì¸ë±ìŠ¤ ìƒì„±
- ë°ì´í„° ë¬´ê²°ì„±ì„ ìœ„í•œ ì™¸ë˜í‚¤ ì„¤ì •

#### âœ… ê´€ë¦¬ì ê³„ì • ìƒì„±
- **íœ´ëŒ€í°**: 010-0000-0000
- **ë¹„ë°€ë²ˆí˜¸**: admin123!
- **ê¶Œí•œ**: ìµœê³ ê´€ë¦¬ì

#### âœ… ê¸°ë³¸ ì„¤ì • ë°ì´í„° ì¶”ê°€
- ì‹œìŠ¤í…œ ì„¤ì •ê°’ ì´ˆê¸°í™”
- reCAPTCHA ì„¤ì •
- SMS ì„¤ì •

### 3. ì„¤ì¹˜ ì™„ë£Œ í™•ì¸
ì„¤ì¹˜ ì„±ê³µ ì‹œ ë‹¤ìŒ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤:
```
ğŸ‰ íƒ‘ë§ˆì¼€íŒ… í”„ë¡œì íŠ¸ ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!
```

---

## âš™ï¸ ì´ˆê¸° ì„¤ì •

### 1. ê´€ë¦¬ì ë¡œê·¸ì¸
- URL: `https://your-domain.com/auth/login`
- íœ´ëŒ€í°: `010-0000-0000`
- ë¹„ë°€ë²ˆí˜¸: `admin123!`

### 2. ë³´ì•ˆ ì„¤ì •
1. **ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ë³€ê²½** (í•„ìˆ˜)
2. **íœ´ëŒ€í° ë²ˆí˜¸ ë³€ê²½** (ê¶Œì¥)
3. **í”„ë¡œí•„ ì •ë³´ ì™„ì„±**

### 3. SMS ì„¤ì • í™•ì¸
- ì•Œë¦¬ê³  API í‚¤ ì„¤ì • í™•ì¸
- SMS ë°œì†¡ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

### 4. reCAPTCHA ì„¤ì • í™•ì¸
- ì‚¬ì´íŠ¸ í‚¤: `6LfViDErAAAAAMcOf3D-JxEhisMDhzLhEDYEahZb`
- ë„ë©”ì¸ ì„¤ì • í™•ì¸
- íšŒì›ê°€ì… í˜ì´ì§€ì—ì„œ ë™ì‘ í…ŒìŠ¤íŠ¸

---

## âœ… ì„¤ì¹˜ í™•ì¸

### 1. ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
curl -k https://your-domain.com/db_test.php

# íšŒì›ê°€ì… í˜ì´ì§€ ì ‘ì†
curl -k https://your-domain.com/auth/signup

# ë¡œê·¸ì¸ í˜ì´ì§€ ì ‘ì†
curl -k https://your-domain.com/auth/login
```

### 2. ë¡œê·¸ í™•ì¸
```bash
# Apache ë¡œê·¸ í™•ì¸
sudo tail -f /var/log/httpd/error_log

# MariaDB ë¡œê·¸ í™•ì¸
sudo tail -f /var/log/mariadb/mariadb.log

# ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸ í™•ì¸
tail -f /var/www/html/topmkt/logs/app.log
```

### 3. ë³´ì•ˆ í…ŒìŠ¤íŠ¸
- [ ] HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸ ë™ì‘ í™•ì¸
- [ ] reCAPTCHA ë™ì‘ í™•ì¸
- [ ] SMS ì¸ì¦ ë™ì‘ í™•ì¸
- [ ] SQL Injection ë°©ì–´ í™•ì¸

---

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
```bash
# MySQL ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
sudo systemctl status mariadb

# ì‚¬ìš©ì ê¶Œí•œ í™•ì¸
mysql -u root -p -e "SELECT user, host FROM mysql.user WHERE user='topmkt_user';"

# ê¶Œí•œ ì¬ì„¤ì •
mysql -u root -p -e "GRANT ALL PRIVILEGES ON topmkt.* TO 'topmkt_user'@'localhost'; FLUSH PRIVILEGES;"
```

### ì›¹ì„œë²„ ì—°ê²° ì‹¤íŒ¨
```bash
# Apache ìƒíƒœ í™•ì¸
sudo systemctl status httpd

# ì„¤ì • íŒŒì¼ í…ŒìŠ¤íŠ¸
sudo httpd -t

# ë°©í™”ë²½ í™•ì¸
sudo firewall-cmd --list-all
```

### ê¶Œí•œ ë¬¸ì œ
```bash
# íŒŒì¼ ê¶Œí•œ ì¬ì„¤ì •
sudo chown -R apache:apache /var/www/html/topmkt
sudo chmod -R 755 /var/www/html/topmkt
sudo chmod -R 777 /var/www/html/topmkt/logs
sudo chmod -R 777 /var/www/html/topmkt/uploads
```

### reCAPTCHA ë™ì‘ ì•ˆí•¨
1. ë„ë©”ì¸ ì„¤ì • í™•ì¸ (Google reCAPTCHA ì½˜ì†”)
2. HTTPS ì‚¬ìš© í™•ì¸
3. ì‚¬ì´íŠ¸ í‚¤ ì •í™•ì„± í™•ì¸
4. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸

---

## ğŸ“ ì§€ì› ë° ë„ì›€ë§

### ë¬¸ì„œ ì°¸ì¡°
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](3.%20ì‹œìŠ¤í…œ%20ì•„í‚¤í…ì²˜.md)
- [DB êµ¬ì¡°](4.DBêµ¬ì¡°.md)
- [reCAPTCHA ì„¤ì • ê°€ì´ë“œ](11.recaptcha-setup.md)
- [ì•Œë¦¬ê³  SMS ì„¤ì • ê°€ì´ë“œ](10.ì•Œë¦¬ê³ _SMS_ì„¤ì •_ê°€ì´ë“œ.md)

### ì£¼ìš” ë§í¬ (ì„¤ì¹˜ í›„)
- ë©”ì¸ í˜ì´ì§€: `https://your-domain.com/`
- ê´€ë¦¬ì ë¡œê·¸ì¸: `https://your-domain.com/auth/login`
- íšŒì›ê°€ì…: `https://your-domain.com/auth/signup`
- DB í…ŒìŠ¤íŠ¸: `https://your-domain.com/db_test.php`

---

**ì°¸ê³ **: ì´ ê°€ì´ë“œëŠ” ì‹¤ì œ ìš´ì˜ í™˜ê²½ì„ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì¼ë¶€ ì„¤ì •ì„ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 