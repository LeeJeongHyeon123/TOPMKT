# ğŸš€ ë°°í¬ ë° ìš´ì˜ ê°€ì´ë“œ

**ìµœì¢… ìˆ˜ì •ì¼:** 2025-12-26 KST  
**ë¬¸ì„œ ë²„ì „:** 1.0  
**ì ìš© ë²”ìœ„:** íƒ‘ë§ˆì¼€íŒ… ì „ì²´ ì‹œìŠ¤í…œ (React + PHP)

---

## ğŸ“‹ ëª©ì°¨

1. [ë°°í¬ ì „ëµ ê°œìš”](#1-ë°°í¬-ì „ëµ-ê°œìš”)
2. [í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬](#2-í”„ë¡ íŠ¸ì—”ë“œ-ë°°í¬)
3. [ë°±ì—”ë“œ ë°°í¬](#3-ë°±ì—”ë“œ-ë°°í¬)
4. [ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬](#4-ë°ì´í„°ë² ì´ìŠ¤-ê´€ë¦¬)
5. [ì„œë²„ ì„¤ì • ë° ê´€ë¦¬](#5-ì„œë²„-ì„¤ì •-ë°-ê´€ë¦¬)
6. [CI/CD ìë™í™”](#6-cicd-ìë™í™”)
7. [ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…](#7-ëª¨ë‹ˆí„°ë§-ë°-ë¡œê¹…)
8. [ì¥ì•  ëŒ€ì‘](#8-ì¥ì• -ëŒ€ì‘)
9. [ë°±ì—… ë° ë³µêµ¬](#9-ë°±ì—…-ë°-ë³µêµ¬)
10. [ì„±ëŠ¥ ìµœì í™”](#10-ì„±ëŠ¥-ìµœì í™”)

---

## 1. ë°°í¬ ì „ëµ ê°œìš”

### ğŸ¯ ë°°í¬ í™˜ê²½ êµ¬ì„±

```
Production (ìš´ì˜) â† Staging (ìŠ¤í…Œì´ì§•) â† Development (ê°œë°œ)
     â†‘                    â†‘                     â†‘
ì‹¤ì œ ì„œë¹„ìŠ¤          ìš´ì˜ í™˜ê²½ í…ŒìŠ¤íŠ¸         ê°œë°œ ë° í…ŒìŠ¤íŠ¸
```

### ğŸ“Š í™˜ê²½ë³„ íŠ¹ì„±

| í™˜ê²½ | ëª©ì  | ë„ë©”ì¸ | íŠ¹ì§• |
|------|------|--------|------|
| **Development** | ê°œë°œ ë° í…ŒìŠ¤íŠ¸ | localhost:3000 | HMR, ë””ë²„ê¹…, ë¹ ë¥¸ ë°˜ë³µ |
| **Staging** | ìš´ì˜ ì „ ê²€ì¦ | staging.topmktx.com | ìš´ì˜ í™˜ê²½ê³¼ ë™ì¼ ì„¤ì • |
| **Production** | ì‹¤ì œ ì„œë¹„ìŠ¤ | www.topmktx.com | ê³ ì„±ëŠ¥, ì•ˆì •ì„±, ë³´ì•ˆ |

### ğŸ”„ ë°°í¬ ì›Œí¬í”Œë¡œìš°

```mermaid
graph LR
    A[ê°œë°œ] --> B[ì½”ë“œ ë¦¬ë·°]
    B --> C[í…ŒìŠ¤íŠ¸]
    C --> D[Staging ë°°í¬]
    D --> E[QA ê²€ì¦]
    E --> F[Production ë°°í¬]
    F --> G[ëª¨ë‹ˆí„°ë§]
```

---

## 2. í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬

### ğŸ—ï¸ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤

```bash
# 1. ì˜ì¡´ì„± ê²€ì¦
npm audit --audit-level high

# 2. íƒ€ì… ì²´í¬
npm run type-check

# 3. ë¦°íŒ…
npm run lint

# 4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test

# 5. í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# 6. ë¹Œë“œ ê²°ê³¼ ê²€ì¦
npm run preview
```

### ğŸ“¦ ë¹Œë“œ ìµœì í™”

```typescript
// vite.config.ts - í”„ë¡œë•ì…˜ ì„¤ì •
export default defineConfig({
  build: {
    outDir: '../../../public/frontend',
    assetsDir: 'assets',
    sourcemap: false, // í”„ë¡œë•ì…˜ì—ì„œëŠ” false
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true,
        pure_funcs: ['console.log', 'console.info']
      }
    },
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          router: ['react-router-dom'],
          utils: ['lodash', 'date-fns']
        }
      }
    },
    chunkSizeWarningLimit: 1000
  }
});
```

### ğŸŒ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# deploy-frontend.sh

set -e

echo "ğŸš€ í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬ ì‹œì‘..."

# 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
export NODE_ENV=production

# 2. ë¹Œë“œ ë””ë ‰í† ë¦¬ ì •ë¦¬
rm -rf frontend/src/frontend/dist
rm -rf public/frontend/*

# 3. ì˜ì¡´ì„± ì„¤ì¹˜
cd frontend/src/frontend
npm ci --only=production

# 4. ë¹Œë“œ ì‹¤í–‰
npm run build

# 5. ë¹Œë“œ ê²°ê³¼ ê²€ì¦
if [ ! -f "../../../public/frontend/index.html" ]; then
    echo "âŒ ë¹Œë“œ ì‹¤íŒ¨: index.htmlì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
    exit 1
fi

# 6. íŒŒì¼ ê¶Œí•œ ì„¤ì •
chmod -R 755 ../../../public/frontend

echo "âœ… í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬ ì™„ë£Œ!"
```

### ğŸ”„ ë¡¤ë°± í”„ë¡œì„¸ìŠ¤

```bash
#!/bin/bash
# rollback-frontend.sh

BACKUP_DIR="/backup/frontend"
CURRENT_DATE=$(date +%Y%m%d_%H%M%S)

# 1. í˜„ì¬ ë²„ì „ ë°±ì—…
cp -r public/frontend "$BACKUP_DIR/rollback_$CURRENT_DATE"

# 2. ì´ì „ ë²„ì „ ë³µì›
if [ -d "$BACKUP_DIR/previous" ]; then
    rm -rf public/frontend/*
    cp -r "$BACKUP_DIR/previous/"* public/frontend/
    echo "âœ… ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°± ì™„ë£Œ"
else
    echo "âŒ ë¡¤ë°±í•  ì´ì „ ë²„ì „ì´ ì—†ìŠµë‹ˆë‹¤."
    exit 1
fi
```

---

## 3. ë°±ì—”ë“œ ë°°í¬

### ğŸ˜ PHP í™˜ê²½ ì„¤ì •

```bash
# 1. PHP í™•ì¥ ëª¨ë“ˆ í™•ì¸
php -m | grep -E "(mysqli|curl|gd|zip|json)"

# 2. PHP ì„¤ì • ìµœì í™” (/etc/php/8.0/apache2/php.ini)
memory_limit = 256M
max_execution_time = 60
upload_max_filesize = 20M
post_max_size = 25M
max_input_vars = 5000

# 3. Apache ëª¨ë“ˆ í™œì„±í™”
a2enmod rewrite
a2enmod ssl
a2enmod headers
```

### ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

```bash
#!/bin/bash
# migrate-database.sh

# 1. ë°±ì—… ìƒì„±
mysqldump -u root -p topmkt > "/backup/db/topmkt_$(date +%Y%m%d_%H%M%S).sql"

# 2. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
php create_tables.php

# 3. ë°ì´í„° ë¬´ê²°ì„± ê²€ì‚¬
php -r "
require_once 'src/config/database.php';
\$db = Database::getInstance()->getConnection();
\$result = \$db->query('SELECT COUNT(*) as count FROM users');
echo 'Users count: ' . \$result->fetch()['count'] . PHP_EOL;
"
```

### ğŸ”’ ë³´ì•ˆ ì„¤ì •

```apache
# .htaccess - ë³´ì•ˆ í—¤ë”
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
    Header always set Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' https://apis.google.com; style-src 'self' 'unsafe-inline'"
</IfModule>

# ë¯¼ê°í•œ íŒŒì¼ ì ‘ê·¼ ì°¨ë‹¨
<Files "*.env">
    Order allow,deny
    Deny from all
</Files>

<Files "config.php">
    Order allow,deny
    Deny from all
</Files>
```

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬

### ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

```sql
-- 1. ì¸ë±ìŠ¤ ìµœì í™”
CREATE INDEX idx_posts_created_at ON posts(created_at);
CREATE INDEX idx_users_phone ON users(phone);
CREATE INDEX idx_comments_post_id ON comments(post_id);

-- 2. ì¿¼ë¦¬ ì„±ëŠ¥ ë¶„ì„
EXPLAIN SELECT * FROM posts WHERE created_at > NOW() - INTERVAL 1 DAY;

-- 3. í…Œì´ë¸” ìµœì í™”
OPTIMIZE TABLE posts;
OPTIMIZE TABLE users;
OPTIMIZE TABLE comments;
```

### ğŸ”„ ë°±ì—… ìë™í™”

```bash
#!/bin/bash
# backup-database.sh

BACKUP_DIR="/backup/db"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="$BACKUP_DIR/topmkt_$DATE.sql"

# 1. ë°±ì—… ìƒì„±
mysqldump -u backup_user -p'backup_password' \
    --single-transaction \
    --routines \
    --triggers \
    topmkt > "$BACKUP_FILE"

# 2. ì••ì¶•
gzip "$BACKUP_FILE"

# 3. ì˜¤ë˜ëœ ë°±ì—… ì‚­ì œ (30ì¼ ì´ìƒ)
find "$BACKUP_DIR" -name "*.sql.gz" -mtime +30 -delete

# 4. ë°±ì—… ì„±ê³µ ì•Œë¦¼
if [ $? -eq 0 ]; then
    echo "âœ… ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì™„ë£Œ: $BACKUP_FILE.gz"
else
    echo "âŒ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ì‹¤íŒ¨"
    exit 1
fi
```

---

## 5. ì„œë²„ ì„¤ì • ë° ê´€ë¦¬

### ğŸ–¥ï¸ ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

```bash
# ìµœì†Œ ìš”êµ¬ì‚¬í•­
CPU: 2 cores
RAM: 4GB
Storage: 50GB SSD
Network: 100Mbps

# ê¶Œì¥ ìš”êµ¬ì‚¬í•­
CPU: 4 cores
RAM: 8GB
Storage: 100GB SSD
Network: 1Gbps
```

### ğŸ”§ ì„œë²„ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# setup-server.sh

# 1. ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
apt update && apt upgrade -y

# 2. í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
apt install -y apache2 php8.0 php8.0-mysql php8.0-curl php8.0-gd php8.0-zip mariadb-server

# 3. Node.js ì„¤ì¹˜
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt install -y nodejs

# 4. SSL ì¸ì¦ì„œ ì„¤ì • (Let's Encrypt)
apt install -y certbot python3-certbot-apache
certbot --apache -d www.topmktx.com

# 5. ë°©í™”ë²½ ì„¤ì •
ufw allow 22
ufw allow 80
ufw allow 443
ufw --force enable

echo "âœ… ì„œë²„ ì„¤ì • ì™„ë£Œ!"
```

### ğŸ“ˆ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§

```bash
#!/bin/bash
# monitor-system.sh

# 1. CPU ì‚¬ìš©ë¥ 
CPU_USAGE=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)

# 2. ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥   
MEM_USAGE=$(free | grep Mem | awk '{printf("%.2f", $3/$2 * 100)}')

# 3. ë””ìŠ¤í¬ ì‚¬ìš©ë¥ 
DISK_USAGE=$(df -h / | awk 'NR==2 {print $5}' | cut -d'%' -f1)

# 4. ì„ê³„ê°’ ì²´í¬
if (( $(echo "$CPU_USAGE > 80" | bc -l) )); then
    echo "âš ï¸ CPU ì‚¬ìš©ë¥  ë†’ìŒ: ${CPU_USAGE}%"
fi

if (( $(echo "$MEM_USAGE > 80" | bc -l) )); then
    echo "âš ï¸ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  ë†’ìŒ: ${MEM_USAGE}%"
fi

if [ "$DISK_USAGE" -gt 80 ]; then
    echo "âš ï¸ ë””ìŠ¤í¬ ì‚¬ìš©ë¥  ë†’ìŒ: ${DISK_USAGE}%"
fi
```

---

## 6. CI/CD ìë™í™”

### ğŸ”„ GitHub Actions ì›Œí¬í”Œë¡œìš°

```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          
      - name: Install dependencies
        run: |
          cd frontend/src/frontend
          npm ci
          
      - name: Run tests
        run: |
          cd frontend/src/frontend
          npm run type-check
          npm run lint
          npm run test
          
  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Build frontend
        run: |
          cd frontend/src/frontend
          npm ci
          npm run build
          
      - name: Deploy to server
        uses: appleboy/ssh-action@v1.0.0
        with:
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USERNAME }}
          key: ${{ secrets.SSH_KEY }}
          script: |
            cd /var/www/topmkt
            git pull origin main
            ./scripts/deploy-frontend.sh
            ./scripts/restart-services.sh
```

### ğŸ”§ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ìë™í™”

```bash
#!/bin/bash
# restart-services.sh

# 1. PHP-FPM ì¬ì‹œì‘
systemctl restart php8.0-fpm

# 2. Apache ì¬ì‹œì‘  
systemctl restart apache2

# 3. ìºì‹œ ì •ë¦¬
rm -rf /tmp/cache/*
php -r "opcache_reset();"

# 4. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
systemctl is-active --quiet php8.0-fpm && echo "âœ… PHP-FPM ì‹¤í–‰ ì¤‘" || echo "âŒ PHP-FPM ì˜¤ë¥˜"
systemctl is-active --quiet apache2 && echo "âœ… Apache ì‹¤í–‰ ì¤‘" || echo "âŒ Apache ì˜¤ë¥˜"

echo "âœ… ì„œë¹„ìŠ¤ ì¬ì‹œì‘ ì™„ë£Œ!"
```

---

## 7. ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### ğŸ“Š ë¡œê·¸ ê´€ë¦¬

```bash
# 1. Apache ë¡œê·¸ ìœ„ì¹˜
/var/log/apache2/access.log
/var/log/apache2/error.log

# 2. PHP ë¡œê·¸ ìœ„ì¹˜  
/var/log/php8.0-fpm.log

# 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œê·¸
/var/www/topmkt/logs/app.log
/var/www/topmkt/logs/error.log
```

### ğŸ” ë¡œê·¸ ë¶„ì„ ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# analyze-logs.sh

LOG_FILE="/var/log/apache2/access.log"
DATE=$(date +%Y-%m-%d)

echo "ğŸ“Š $DATE ë¡œê·¸ ë¶„ì„ ê²°ê³¼"
echo "========================"

# 1. ì´ ìš”ì²­ ìˆ˜
TOTAL_REQUESTS=$(grep "$DATE" "$LOG_FILE" | wc -l)
echo "ì´ ìš”ì²­ ìˆ˜: $TOTAL_REQUESTS"

# 2. ì—ëŸ¬ ìš”ì²­ ìˆ˜  
ERROR_REQUESTS=$(grep "$DATE" "$LOG_FILE" | grep -E " [45][0-9][0-9] " | wc -l)
echo "ì—ëŸ¬ ìš”ì²­ ìˆ˜: $ERROR_REQUESTS"

# 3. ê°€ì¥ ë§ì´ ì ‘ê·¼í•œ í˜ì´ì§€
echo -e "\nğŸ”¥ ì¸ê¸° í˜ì´ì§€ TOP 10:"
grep "$DATE" "$LOG_FILE" | awk '{print $7}' | sort | uniq -c | sort -nr | head -10

# 4. ê°€ì¥ ë§ì€ IP ì£¼ì†Œ
echo -e "\nğŸ“ ì ‘ì† IP TOP 10:"
grep "$DATE" "$LOG_FILE" | awk '{print $1}' | sort | uniq -c | sort -nr | head -10
```

### ğŸ“ˆ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

```php
<?php
// performance-monitor.php

class PerformanceMonitor {
    private static $metrics = [];
    
    public static function start($name) {
        self::$metrics[$name] = [
            'start_time' => microtime(true),
            'start_memory' => memory_get_usage()
        ];
    }
    
    public static function end($name) {
        if (!isset(self::$metrics[$name])) return;
        
        $end_time = microtime(true);
        $end_memory = memory_get_usage();
        
        $duration = $end_time - self::$metrics[$name]['start_time'];
        $memory_usage = $end_memory - self::$metrics[$name]['start_memory'];
        
        error_log("Performance [$name]: {$duration}s, Memory: " . 
                 number_format($memory_usage / 1024, 2) . "KB");
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
PerformanceMonitor::start('database_query');
// ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì‹¤í–‰
PerformanceMonitor::end('database_query');
?>
```

---

## 8. ì¥ì•  ëŒ€ì‘

### ğŸš¨ ì¥ì•  ëŒ€ì‘ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### 1ë‹¨ê³„: ì¦‰ì‹œ ëŒ€ì‘ (1ë¶„ ì´ë‚´)
- [ ] ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
- [ ] ì—ëŸ¬ ë¡œê·¸ í™•ì¸
- [ ] íŠ¸ë˜í”½ íŒ¨í„´ ë¶„ì„
- [ ] ê¸´ê¸‰ ì•Œë¦¼ ë°œì†¡

#### 2ë‹¨ê³„: ì›ì¸ ë¶„ì„ (5ë¶„ ì´ë‚´)
- [ ] ì„œë²„ ë¦¬ì†ŒìŠ¤ í™•ì¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸
- [ ] ìµœê·¼ ë°°í¬ ì´ë ¥ í™•ì¸
- [ ] ì™¸ë¶€ ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

#### 3ë‹¨ê³„: ë³µêµ¬ ì‘ì—… (15ë¶„ ì´ë‚´)
- [ ] ë¡¤ë°± ì‹¤í–‰ (í•„ìš”ì‹œ)
- [ ] ì„œë¹„ìŠ¤ ì¬ì‹œì‘
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ë³µêµ¬
- [ ] ìºì‹œ ì´ˆê¸°í™”

### ğŸ› ï¸ ì¥ì•  ë³µêµ¬ ìŠ¤í¬ë¦½íŠ¸

```bash
#!/bin/bash
# emergency-recovery.sh

echo "ğŸš¨ ê¸´ê¸‰ ë³µêµ¬ ì‹œì‘..."

# 1. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
systemctl is-active --quiet apache2 || {
    echo "Apache ì¬ì‹œì‘ ì¤‘..."
    systemctl restart apache2
}

systemctl is-active --quiet mysql || {
    echo "MySQL ì¬ì‹œì‘ ì¤‘..."
    systemctl restart mysql
}

# 2. ë””ìŠ¤í¬ ê³µê°„ í™•ì¸
DISK_USAGE=$(df / | tail -1 | awk '{print $5}' | sed 's/%//')
if [ "$DISK_USAGE" -gt 90 ]; then
    echo "ë””ìŠ¤í¬ ê³µê°„ ë¶€ì¡± - ë¡œê·¸ ì •ë¦¬ ì¤‘..."
    find /var/log -name "*.log" -mtime +7 -delete
    find /tmp -type f -mtime +1 -delete
fi

# 3. ìºì‹œ ì´ˆê¸°í™”
rm -rf /tmp/cache/*
php -r "opcache_reset();"

echo "âœ… ê¸´ê¸‰ ë³µêµ¬ ì™„ë£Œ!"
```

---

## 9. ë°±ì—… ë° ë³µêµ¬

### ğŸ’¾ ë°±ì—… ì „ëµ

```bash
# 1. ì „ì²´ ë°±ì—… (ë§¤ì¼ ìƒˆë²½ 2ì‹œ)
0 2 * * * /scripts/full-backup.sh

# 2. ì¦ë¶„ ë°±ì—… (ë§¤ 6ì‹œê°„)
0 */6 * * * /scripts/incremental-backup.sh

# 3. ì„¤ì • íŒŒì¼ ë°±ì—… (ë§¤ì£¼)
0 3 * * 0 /scripts/config-backup.sh
```

### ğŸ”„ ë³µêµ¬ í”„ë¡œì„¸ìŠ¤

```bash
#!/bin/bash
# restore-backup.sh

BACKUP_DATE=$1
BACKUP_DIR="/backup"

if [ -z "$BACKUP_DATE" ]; then
    echo "ì‚¬ìš©ë²•: $0 YYYYMMDD"
    exit 1
fi

echo "ğŸ”„ $BACKUP_DATE ë°±ì—…ì—ì„œ ë³µêµ¬ ì‹œì‘..."

# 1. ì„œë¹„ìŠ¤ ì¤‘ì§€
systemctl stop apache2
systemctl stop mysql

# 2. ë°ì´í„°ë² ì´ìŠ¤ ë³µêµ¬
mysql -u root -p topmkt < "$BACKUP_DIR/db/topmkt_$BACKUP_DATE.sql"

# 3. íŒŒì¼ ë³µêµ¬
rm -rf /var/www/topmkt
tar -xzf "$BACKUP_DIR/files/topmkt_$BACKUP_DATE.tar.gz" -C /var/www/

# 4. ê¶Œí•œ ì„¤ì •
chown -R www-data:www-data /var/www/topmkt
chmod -R 755 /var/www/topmkt

# 5. ì„œë¹„ìŠ¤ ì‹œì‘
systemctl start mysql
systemctl start apache2

echo "âœ… ë³µêµ¬ ì™„ë£Œ!"
```

---

## 10. ì„±ëŠ¥ ìµœì í™”

### âš¡ ì›¹ ì„œë²„ ìµœì í™”

```apache
# Apache ì„¤ì • ìµœì í™”
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/pdf "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
</IfModule>
```

### ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

```sql
-- MySQL ì„¤ì • ìµœì í™” (/etc/mysql/mysql.conf.d/mysqld.cnf)
[mysqld]
innodb_buffer_pool_size = 512M
innodb_log_file_size = 128M
innodb_flush_log_at_trx_commit = 2
query_cache_size = 64M
query_cache_type = 1
max_connections = 200
```

### ğŸ“Š ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

```bash
#!/bin/bash
# benchmark.sh

echo "ğŸš€ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì‹œì‘..."

# 1. ì›¹ ì„œë²„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
ab -n 1000 -c 10 https://www.topmktx.com/ > benchmark_home.txt

# 2. API ì„±ëŠ¥ í…ŒìŠ¤íŠ¸  
ab -n 500 -c 5 -p post_data.json -T application/json https://www.topmktx.com/api/posts > benchmark_api.txt

# 3. ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
sysbench --test=oltp --mysql-user=test --mysql-password=test --mysql-db=topmkt --oltp-table-size=10000 prepare
sysbench --test=oltp --mysql-user=test --mysql-password=test --mysql-db=topmkt --max-requests=1000 run > benchmark_db.txt

echo "âœ… ë²¤ì¹˜ë§ˆí¬ ì™„ë£Œ!"
```

---

## ğŸ¯ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ë°°í¬ ì „ ì ê²€ì‚¬í•­

- [ ] **ì½”ë“œ í’ˆì§ˆ ê²€ì¦**
  - [ ] TypeScript ì»´íŒŒì¼ ì—ëŸ¬ 0ê°œ
  - [ ] ESLint ì—ëŸ¬ í•´ê²°
  - [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í†µê³¼
  - [ ] E2E í…ŒìŠ¤íŠ¸ í†µê³¼

- [ ] **ë³´ì•ˆ ê²€ì¦**
  - [ ] ì˜ì¡´ì„± ì·¨ì•½ì  ì ê²€
  - [ ] ë¯¼ê°í•œ ì •ë³´ ì œê±°
  - [ ] HTTPS ê°•ì œ ì„¤ì •
  - [ ] ë³´ì•ˆ í—¤ë” ì„¤ì •

- [ ] **ì„±ëŠ¥ ê²€ì¦**
  - [ ] ë²ˆë“¤ í¬ê¸° ìµœì í™”
  - [ ] ì´ë¯¸ì§€ ìµœì í™”
  - [ ] ìºì‹± ì „ëµ ì ìš©
  - [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ í†µê³¼

### âœ… ë°°í¬ í›„ ì ê²€ì‚¬í•­

- [ ] **ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸**
  - [ ] ë©”ì¸ í˜ì´ì§€ ë¡œë”© í™•ì¸
  - [ ] ì£¼ìš” ê¸°ëŠ¥ ë™ì‘ í™•ì¸
  - [ ] ëª¨ë°”ì¼ í™˜ê²½ í™•ì¸
  - [ ] í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í™•ì¸

- [ ] **ëª¨ë‹ˆí„°ë§ ì„¤ì •**
  - [ ] ë¡œê·¸ ìˆ˜ì§‘ ì •ìƒí™”
  - [ ] ì•Œë¦¼ ì‹œìŠ¤í…œ í™œì„±í™”
  - [ ] ì„±ëŠ¥ ì§€í‘œ ìˆ˜ì§‘
  - [ ] ì—ëŸ¬ ì¶”ì  í™œì„±í™”

---

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

### ğŸ‘¥ ìš´ì˜íŒ€ ì—°ë½ì²˜
- **ê¸´ê¸‰ ìƒí™©**: dev@topmktx.com
- **ì¼ë°˜ ë¬¸ì˜**: support@topmktx.com
- **ê¸°ìˆ  ì§€ì›**: 24ì‹œê°„ ëŒ€ê¸°

### ğŸ“š ì¶”ê°€ ìë£Œ
- [ì„œë²„ ê´€ë¦¬ ë§¤ë‰´ì–¼](21.ì‹œìŠ¤í…œ_ì„¤ì¹˜_ì„¤ì •_ê°€ì´ë“œ.md)
- [ëª¨ë‹ˆí„°ë§ ê°€ì´ë“œ](monitoring-guide.md)
- [ë°±ì—… ë³µêµ¬ ê°€ì´ë“œ](BACKUP_ì™„ì „_ë°±ì—…_ê°€ì´ë“œ.md)

---

*ğŸ“ ë¬¸ì„œ ì‘ì„±ì: ê°œë°œíŒ€*  
*ğŸ“§ ë¬¸ì˜: dev@topmktx.com*  
*ğŸ”„ ì—…ë°ì´íŠ¸: ì£¼ìš” ë°°í¬ ì‹œ*