# üîå Ïô∏Î∂ÄÏÑúÎπÑÏä§ Ïó∞Îèô Í∞ÄÏù¥Îìú

**ÏµúÏ¢Ö ÏàòÏ†ïÏùº:** 2025-12-26 KST  
**Î¨∏ÏÑú Î≤ÑÏ†Ñ:** 1.0  
**Ï†ÅÏö© Î≤îÏúÑ:** ÌÉëÎßàÏºÄÌåÖ ÌîåÎû´Ìèº Ïô∏Î∂Ä API Ïó∞Îèô

---

## üìã Î™©Ï∞®

1. [Ïó∞Îèô ÏÑúÎπÑÏä§ Í∞úÏöî](#1-Ïó∞Îèô-ÏÑúÎπÑÏä§-Í∞úÏöî)
2. [SMS ÏÑúÎπÑÏä§ (ÏïåÎ¶¨Í≥†)](#2-sms-ÏÑúÎπÑÏä§-ÏïåÎ¶¨Í≥†)
3. [reCAPTCHA v3](#3-recaptcha-v3)
4. [ÎÑ§Ïù¥Î≤Ñ ÏßÄÎèÑ API](#4-ÎÑ§Ïù¥Î≤Ñ-ÏßÄÎèÑ-api)
5. [Ïπ¥Ïπ¥Ïò§ Ï£ºÏÜå Í≤ÄÏÉâ API](#5-Ïπ¥Ïπ¥Ïò§-Ï£ºÏÜå-Í≤ÄÏÉâ-api)
6. [Firebase Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ](#6-firebase-Ïã§ÏãúÍ∞Ñ-Ï±ÑÌåÖ)
7. [Google Analytics](#7-google-analytics)
8. [Ïù¥Î©îÏùº ÏÑúÎπÑÏä§](#8-Ïù¥Î©îÏùº-ÏÑúÎπÑÏä§)
9. [ÌååÏùº Ï†ÄÏû•ÏÜå](#9-ÌååÏùº-Ï†ÄÏû•ÏÜå)
10. [Î™®ÎãàÌÑ∞ÎßÅ ÎèÑÍµ¨](#10-Î™®ÎãàÌÑ∞ÎßÅ-ÎèÑÍµ¨)

---

## 1. Ïó∞Îèô ÏÑúÎπÑÏä§ Í∞úÏöî

### üéØ ÌòÑÏû¨ Ïó∞ÎèôÎêú ÏÑúÎπÑÏä§

| ÏÑúÎπÑÏä§ | Ïö©ÎèÑ | ÏÉÅÌÉú | ÎπÑÏö© |
|--------|------|------|------|
| **ÏïåÎ¶¨Í≥† SMS** | Ïù∏Ï¶ùÎ≤àÌò∏ Î∞úÏÜ° | üü¢ Ïö¥ÏòÅÏ§ë | Ïú†Î£å |
| **reCAPTCHA v3** | Ïä§Ìå∏ Î∞©ÏßÄ | üü¢ Ïö¥ÏòÅÏ§ë | Î¨¥Î£å |
| **ÎÑ§Ïù¥Î≤Ñ ÏßÄÎèÑ** | Í∞ïÏùò Ïû•ÏÜå ÌëúÏãú | üü¢ Ïö¥ÏòÅÏ§ë | Î¨¥Î£å |
| **Ïπ¥Ïπ¥Ïò§ Ï£ºÏÜåÍ≤ÄÏÉâ** | Ï†ïÌôïÌïú Ï£ºÏÜå ÏûÖÎ†• | üü¢ Ïö¥ÏòÅÏ§ë | Î¨¥Î£å |
| **Firebase** | Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ | üü¢ Ïö¥ÏòÅÏ§ë | Î∂ÄÎ∂ÑÏú†Î£å |
| **Google Analytics** | ÏÇ¨Ïö©Ïûê Î∂ÑÏÑù | üü° ÏÑ§Ï†ïÏ§ë | Î¨¥Î£å |

### üìä Ïó∞Îèô Ïö∞ÏÑ†ÏàúÏúÑ

#### üî¥ ÌïÑÏàò (ÏÑúÎπÑÏä§ Ïö¥ÏòÅÏóê ÌïÑÏàò)
- SMS Ïù∏Ï¶ù ÏÑúÎπÑÏä§
- reCAPTCHA Ïä§Ìå∏ Î∞©ÏßÄ
- Ï£ºÏÜå Í≤ÄÏÉâ API

#### üü° Í∂åÏû• (ÏÇ¨Ïö©Ïûê Í≤ΩÌóò Ìñ•ÏÉÅ)
- ÏßÄÎèÑ ÏÑúÎπÑÏä§
- Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ
- ÏÇ¨Ïö©Ïûê Î∂ÑÏÑù

#### üü¢ ÏÑ†ÌÉù (Î∂ÄÍ∞Ä Í∏∞Îä•)
- Ïù¥Î©îÏùº Î∞úÏÜ°
- ÌÅ¥ÎùºÏö∞Îìú Ï†ÄÏû•ÏÜå
- Î™®ÎãàÌÑ∞ÎßÅ ÎèÑÍµ¨

---

## 2. SMS ÏÑúÎπÑÏä§ (ÏïåÎ¶¨Í≥†)

### üì± ÏïåÎ¶¨Í≥† SMS API Ïó∞Îèô

#### ÏÑ§Ï†ï ÌååÏùº
```php
// src/config/sms.php
return [
    'aligo' => [
        'api_key' => 'your_aligo_api_key',
        'user_id' => 'your_aligo_user_id',
        'sender' => '070-0000-0000',  // Î∞úÏã†Î≤àÌò∏
        'testmode' => false,          // true: ÌÖåÏä§Ìä∏ Î™®Îìú
        'base_url' => 'https://apis.aligo.in/send/',
    ]
];
```

#### SMS Î∞úÏÜ° Ìó¨Ìçº ÌÅ¥ÎûòÏä§
```php
// src/helpers/SmsHelper.php
class SmsHelper {
    private static $config;
    
    public static function init() {
        self::$config = require_once __DIR__ . '/../config/sms.php';
    }
    
    /**
     * Í∏∞Î≥∏ SMS Î∞úÏÜ°
     */
    public static function sendSms($phone, $message) {
        $data = [
            'key' => self::$config['aligo']['api_key'],
            'user_id' => self::$config['aligo']['user_id'],
            'sender' => self::$config['aligo']['sender'],
            'receiver' => self::formatPhone($phone),
            'msg' => $message,
            'testmode_yn' => self::$config['aligo']['testmode'] ? 'Y' : 'N'
        ];
        
        return self::sendRequest($data);
    }
    
    /**
     * Ïù∏Ï¶ùÎ≤àÌò∏ Î∞úÏÜ°
     */
    public static function sendAuthCodeSms($phone, $authCode) {
        $message = "[ÌÉëÎßàÏºÄÌåÖ] Ïù∏Ï¶ùÎ≤àÌò∏Îäî [{$authCode}]ÏûÖÎãàÎã§. 3Î∂Ñ ÎÇ¥Ïóê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.";
        return self::sendSms($phone, $message);
    }
    
    /**
     * ÌôòÏòÅ Î©îÏãúÏßÄ Î∞úÏÜ°
     */
    public static function sendWelcomeSms($phone, $nickname) {
        $message = "[ÌÉëÎßàÏºÄÌåÖ] {$nickname}Îãò, ÌöåÏõêÍ∞ÄÏûÖÏùÑ Ï∂ïÌïòÌï©ÎãàÎã§! üéâ https://www.topmktx.com";
        return self::sendSms($phone, $message);
    }
    
    /**
     * Ï†ÑÌôîÎ≤àÌò∏ Ìè¨Îß∑ÌåÖ
     */
    public static function formatPhone($phone) {
        $phone = preg_replace('/[^0-9]/', '', $phone);
        
        if (strlen($phone) === 11 && substr($phone, 0, 3) === '010') {
            return $phone;
        }
        
        if (strlen($phone) === 10) {
            return '0' . $phone;
        }
        
        return $phone;
    }
    
    /**
     * API ÏöîÏ≤≠ Ï†ÑÏÜ°
     */
    private static function sendRequest($data) {
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, self::$config['aligo']['base_url']);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data));
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        
        $response = curl_exec($ch);
        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);
        
        if ($httpCode !== 200) {
            throw new Exception("SMS API Ïò§Î•ò: HTTP $httpCode");
        }
        
        $result = json_decode($response, true);
        
        if (!$result || $result['result_code'] !== '1') {
            throw new Exception("SMS Î∞úÏÜ° Ïã§Ìå®: " . ($result['message'] ?? 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò'));
        }
        
        return [
            'success' => true,
            'message_id' => $result['msg_id'] ?? null,
            'result' => $result
        ];
    }
}
```

#### ÏÇ¨Ïö© ÏòàÏãú
```php
// Ïù∏Ï¶ùÎ≤àÌò∏ Î∞úÏÜ°
try {
    SmsHelper::init();
    $result = SmsHelper::sendAuthCodeSms('010-1234-5678', '123456');
    
    if ($result['success']) {
        echo "SMS Î∞úÏÜ° ÏÑ±Í≥µ: " . $result['message_id'];
    }
} catch (Exception $e) {
    echo "SMS Î∞úÏÜ° Ïã§Ìå®: " . $e->getMessage();
}
```

---

## 3. reCAPTCHA v3

### üõ°Ô∏è Google reCAPTCHA v3 ÏÑ§Ï†ï

#### ÏÑ§Ï†ï ÌååÏùº
```php
// src/config/recaptcha.php
return [
    'site_key' => 'your_recaptcha_site_key',
    'secret_key' => 'your_recaptcha_secret_key',
    'threshold' => 0.5,  // Ïä§Ìå∏ ÌåêÏ†ï ÏûÑÍ≥ÑÍ∞í (0.0 ~ 1.0)
    'timeout' => 10,     // API ÌÉÄÏûÑÏïÑÏõÉ (Ï¥à)
];
```

#### ÌîÑÎ°†Ìä∏ÏóîÎìú Íµ¨ÌòÑ (React)
```typescript
// RecaptchaProvider.tsx
import React, { createContext, useContext, useEffect, useState } from 'react';

interface RecaptchaContextType {
  executeRecaptcha: (action: string) => Promise<string>;
  isLoaded: boolean;
}

const RecaptchaContext = createContext<RecaptchaContextType | null>(null);

export const RecaptchaProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [isLoaded, setIsLoaded] = useState(false);

  useEffect(() => {
    const loadRecaptcha = () => {
      const script = document.createElement('script');
      script.src = `https://www.google.com/recaptcha/api.js?render=${process.env.REACT_APP_RECAPTCHA_SITE_KEY}`;
      script.onload = () => setIsLoaded(true);
      document.head.appendChild(script);
    };

    if (!window.grecaptcha) {
      loadRecaptcha();
    } else {
      setIsLoaded(true);
    }
  }, []);

  const executeRecaptcha = async (action: string): Promise<string> => {
    if (!isLoaded || !window.grecaptcha) {
      throw new Error('reCAPTCHAÍ∞Ä Î°úÎìúÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.');
    }

    return new Promise((resolve, reject) => {
      window.grecaptcha.ready(() => {
        window.grecaptcha
          .execute(process.env.REACT_APP_RECAPTCHA_SITE_KEY!, { action })
          .then(resolve)
          .catch(reject);
      });
    });
  };

  return (
    <RecaptchaContext.Provider value={{ executeRecaptcha, isLoaded }}>
      {children}
    </RecaptchaContext.Provider>
  );
};

export const useRecaptcha = () => {
  const context = useContext(RecaptchaContext);
  if (!context) {
    throw new Error('useRecaptcha must be used within RecaptchaProvider');
  }
  return context;
};
```

#### Î∞±ÏóîÎìú Í≤ÄÏ¶ù
```php
// src/helpers/RecaptchaHelper.php
class RecaptchaHelper {
    private static $config;
    
    public static function init() {
        self::$config = require_once __DIR__ . '/../config/recaptcha.php';
    }
    
    /**
     * reCAPTCHA ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù
     */
    public static function verify($token, $action = null) {
        if (empty($token)) {
            return [
                'success' => false,
                'error' => 'reCAPTCHA ÌÜ†ÌÅ∞Ïù¥ ÏóÜÏäµÎãàÎã§.'
            ];
        }
        
        $data = [
            'secret' => self::$config['secret_key'],
            'response' => $token,
            'remoteip' => $_SERVER['REMOTE_ADDR'] ?? null
        ];
        
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, 'https://www.google.com/recaptcha/api/siteverify');
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data));
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_TIMEOUT, self::$config['timeout']);
        
        $response = curl_exec($ch);
        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);
        
        if ($httpCode !== 200) {
            return [
                'success' => false,
                'error' => 'reCAPTCHA API Ïò§Î•ò'
            ];
        }
        
        $result = json_decode($response, true);
        
        if (!$result['success']) {
            return [
                'success' => false,
                'error' => 'reCAPTCHA Í≤ÄÏ¶ù Ïã§Ìå®',
                'error_codes' => $result['error-codes'] ?? []
            ];
        }
        
        // Ïä§ÏΩîÏñ¥ ÌôïÏù∏ (v3 Ï†ÑÏö©)
        if (isset($result['score'])) {
            if ($result['score'] < self::$config['threshold']) {
                return [
                    'success' => false,
                    'error' => 'Ïä§Ìå∏ÏúºÎ°ú ÌåêÏ†ïÎêòÏóàÏäµÎãàÎã§.',
                    'score' => $result['score']
                ];
            }
        }
        
        // Ïï°ÏÖò ÌôïÏù∏
        if ($action && isset($result['action']) && $result['action'] !== $action) {
            return [
                'success' => false,
                'error' => 'ÏûòÎ™ªÎêú Ïï°ÏÖòÏûÖÎãàÎã§.'
            ];
        }
        
        return [
            'success' => true,
            'score' => $result['score'] ?? null,
            'action' => $result['action'] ?? null
        ];
    }
}
```

---

## 4. ÎÑ§Ïù¥Î≤Ñ ÏßÄÎèÑ API

### üó∫Ô∏è ÎÑ§Ïù¥Î≤Ñ ÏßÄÎèÑ API Ïó∞Îèô

#### ÏÑ§Ï†ï ÌååÏùº
```php
// src/config/map.php
return [
    'naver' => [
        'client_id' => 'your_naver_client_id',
        'client_secret' => 'your_naver_client_secret',
        'map_id' => 'your_naver_map_id'
    ]
];
```

#### React ÏßÄÎèÑ Ïª¥Ìè¨ÎÑåÌä∏
```typescript
// components/map/NaverMap.tsx
import React, { useEffect, useRef } from 'react';

interface NaverMapProps {
  center: { lat: number; lng: number };
  zoom?: number;
  markers?: Array<{
    lat: number;
    lng: number;
    title: string;
    content?: string;
  }>;
  onMapClick?: (coord: { lat: number; lng: number }) => void;
}

const NaverMap: React.FC<NaverMapProps> = ({
  center,
  zoom = 15,
  markers = [],
  onMapClick
}) => {
  const mapRef = useRef<HTMLDivElement>(null);
  const mapInstanceRef = useRef<any>(null);
  const markersRef = useRef<any[]>([]);

  useEffect(() => {
    if (!mapRef.current) return;

    // ÎÑ§Ïù¥Î≤Ñ ÏßÄÎèÑ Ï¥àÍ∏∞Ìôî
    const mapOptions = {
      center: new window.naver.maps.LatLng(center.lat, center.lng),
      zoom: zoom,
      mapTypeControl: true,
      mapTypeControlOptions: {
        style: window.naver.maps.MapTypeControlStyle.BUTTON,
        position: window.naver.maps.Position.TOP_RIGHT
      },
      zoomControl: true,
      zoomControlOptions: {
        style: window.naver.maps.ZoomControlStyle.SMALL,
        position: window.naver.maps.Position.RIGHT_CENTER
      }
    };

    const map = new window.naver.maps.Map(mapRef.current, mapOptions);
    mapInstanceRef.current = map;

    // ÏßÄÎèÑ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
    if (onMapClick) {
      window.naver.maps.Event.addListener(map, 'click', (e: any) => {
        const coord = e.coord;
        onMapClick({
          lat: coord.lat(),
          lng: coord.lng()
        });
      });
    }

    return () => {
      if (mapInstanceRef.current) {
        mapInstanceRef.current.destroy();
      }
    };
  }, [center.lat, center.lng, zoom, onMapClick]);

  // ÎßàÏª§ ÏóÖÎç∞Ïù¥Ìä∏
  useEffect(() => {
    if (!mapInstanceRef.current) return;

    // Í∏∞Ï°¥ ÎßàÏª§ Ï†úÍ±∞
    markersRef.current.forEach(marker => marker.setMap(null));
    markersRef.current = [];

    // ÏÉà ÎßàÏª§ Ï∂îÍ∞Ä
    markers.forEach(markerData => {
      const marker = new window.naver.maps.Marker({
        position: new window.naver.maps.LatLng(markerData.lat, markerData.lng),
        map: mapInstanceRef.current,
        title: markerData.title
      });

      markersRef.current.push(marker);

      // Ï†ïÎ≥¥Ï∞Ω Ï∂îÍ∞Ä
      if (markerData.content) {
        const infoWindow = new window.naver.maps.InfoWindow({
          content: `<div style="padding:10px;min-width:200px;">${markerData.content}</div>`
        });

        window.naver.maps.Event.addListener(marker, 'click', () => {
          if (infoWindow.getMap()) {
            infoWindow.close();
          } else {
            infoWindow.open(mapInstanceRef.current, marker);
          }
        });
      }
    });
  }, [markers]);

  return (
    <div 
      ref={mapRef} 
      className="w-full h-96 border border-gray-300 rounded-lg"
    />
  );
};

export default NaverMap;
```

#### ÏßÄÎèÑ Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎçî
```typescript
// utils/loadNaverMapScript.ts
let isLoaded = false;
let isLoading = false;

export const loadNaverMapScript = (): Promise<void> => {
  if (isLoaded) {
    return Promise.resolve();
  }

  if (isLoading) {
    return new Promise((resolve) => {
      const checkLoaded = () => {
        if (isLoaded) {
          resolve();
        } else {
          setTimeout(checkLoaded, 100);
        }
      };
      checkLoaded();
    });
  }

  isLoading = true;

  return new Promise((resolve, reject) => {
    const script = document.createElement('script');
    script.src = `https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${process.env.REACT_APP_NAVER_CLIENT_ID}`;
    script.onload = () => {
      isLoaded = true;
      isLoading = false;
      resolve();
    };
    script.onerror = () => {
      isLoading = false;
      reject(new Error('ÎÑ§Ïù¥Î≤Ñ ÏßÄÎèÑ Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎìú Ïã§Ìå®'));
    };
    document.head.appendChild(script);
  });
};
```

---

## 5. Ïπ¥Ïπ¥Ïò§ Ï£ºÏÜå Í≤ÄÏÉâ API

### üìç Ïπ¥Ïπ¥Ïò§ Ï£ºÏÜå Í≤ÄÏÉâ Ïó∞Îèô

#### ÏÑ§Ï†ï ÌååÏùº
```php
// src/config/address.php
return [
    'kakao' => [
        'rest_api_key' => 'your_kakao_rest_api_key',
        'javascript_key' => 'your_kakao_javascript_key'
    ]
];
```

#### React Ï£ºÏÜå Í≤ÄÏÉâ Ïª¥Ìè¨ÎÑåÌä∏
```typescript
// components/address/AddressSearch.tsx
import React, { useState } from 'react';

interface AddressSearchProps {
  onAddressSelect: (address: {
    address: string;
    roadAddress: string;
    zonecode: string;
    lat: number;
    lng: number;
  }) => void;
}

const AddressSearch: React.FC<AddressSearchProps> = ({ onAddressSelect }) => {
  const [isOpen, setIsOpen] = useState(false);

  const openAddressSearch = () => {
    if (!window.daum) {
      console.error('Ïπ¥Ïπ¥Ïò§ Ï£ºÏÜå Í≤ÄÏÉâ APIÍ∞Ä Î°úÎìúÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.');
      return;
    }

    new window.daum.Postcode({
      oncomplete: async (data: any) => {
        // Ï¢åÌëú Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
        const coords = await getCoordinates(data.address);
        
        onAddressSelect({
          address: data.address,
          roadAddress: data.roadAddress || data.address,
          zonecode: data.zonecode,
          lat: coords.lat,
          lng: coords.lng
        });
        
        setIsOpen(false);
      },
      onclose: () => setIsOpen(false),
      width: '100%',
      height: '100%'
    }).open();
    
    setIsOpen(true);
  };

  // Ï¢åÌëú Î≥ÄÌôò Ìï®Ïàò
  const getCoordinates = async (address: string) => {
    try {
      const response = await fetch(`/api/address/coordinates?address=${encodeURIComponent(address)}`);
      const data = await response.json();
      
      if (data.success && data.coordinates) {
        return data.coordinates;
      }
    } catch (error) {
      console.error('Ï¢åÌëú Î≥ÄÌôò Ïã§Ìå®:', error);
    }
    
    // Í∏∞Î≥∏Í∞í Î∞òÌôò (ÏÑúÏö∏ÏãúÏ≤≠)
    return { lat: 37.5663, lng: 126.9779 };
  };

  return (
    <div>
      <button
        type="button"
        onClick={openAddressSearch}
        className="w-full px-4 py-2 text-left border border-gray-300 rounded-lg hover:border-blue-500 focus:outline-none focus:border-blue-500"
      >
        üîç Ï£ºÏÜå Í≤ÄÏÉâ
      </button>
    </div>
  );
};

export default AddressSearch;
```

#### Î∞±ÏóîÎìú Ï¢åÌëú Î≥ÄÌôò API
```php
// src/controllers/AddressController.php
class AddressController {
    public function getCoordinates() {
        $address = $_GET['address'] ?? '';
        
        if (empty($address)) {
            ResponseHelper::jsonError('Ï£ºÏÜåÍ∞Ä ÌïÑÏöîÌï©ÎãàÎã§.');
            return;
        }
        
        try {
            $coordinates = $this->convertAddressToCoords($address);
            
            ResponseHelper::jsonSuccess([
                'coordinates' => $coordinates
            ]);
        } catch (Exception $e) {
            ResponseHelper::jsonError('Ï¢åÌëú Î≥ÄÌôò Ïã§Ìå®: ' . $e->getMessage());
        }
    }
    
    private function convertAddressToCoords($address) {
        $config = require_once __DIR__ . '/../config/address.php';
        $apiKey = $config['kakao']['rest_api_key'];
        
        $url = 'https://dapi.kakao.com/v2/local/search/address.json';
        $data = [
            'query' => $address,
            'size' => 1
        ];
        
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url . '?' . http_build_query($data));
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, [
            'Authorization: KakaoAK ' . $apiKey
        ]);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        
        $response = curl_exec($ch);
        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);
        
        if ($httpCode !== 200) {
            throw new Exception('Ïπ¥Ïπ¥Ïò§ API Ïò§Î•ò: HTTP ' . $httpCode);
        }
        
        $result = json_decode($response, true);
        
        if (empty($result['documents'])) {
            throw new Exception('Ï£ºÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
        }
        
        $document = $result['documents'][0];
        
        return [
            'lat' => (float) $document['y'],
            'lng' => (float) $document['x']
        ];
    }
}
```

---

## 6. Firebase Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ

### üî• Firebase ÏÑ§Ï†ï

#### Firebase ÏÑ§Ï†ï ÌååÏùº
```typescript
// src/services/firebase.ts
import { initializeApp } from 'firebase/app';
import { getDatabase } from 'firebase/database';
import { getAuth } from 'firebase/auth';

const firebaseConfig = {
  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,
  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,
  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,
  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,
  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.REACT_APP_FIREBASE_APP_ID
};

const app = initializeApp(firebaseConfig);
export const database = getDatabase(app);
export const auth = getAuth(app);
```

#### Ï±ÑÌåÖ ÏÑúÎπÑÏä§
```typescript
// services/chatService.ts
import { database } from './firebase';
import { ref, push, onValue, off, query, orderByChild, limitToLast } from 'firebase/database';

export interface ChatMessage {
  id: string;
  userId: string;
  userNickname: string;
  message: string;
  timestamp: number;
  roomId: string;
}

class ChatService {
  /**
   * Î©îÏãúÏßÄ Ï†ÑÏÜ°
   */
  async sendMessage(roomId: string, userId: string, userNickname: string, message: string) {
    const messagesRef = ref(database, `chats/${roomId}/messages`);
    
    const messageData = {
      userId,
      userNickname,
      message: message.trim(),
      timestamp: Date.now()
    };
    
    await push(messagesRef, messageData);
  }
  
  /**
   * Î©îÏãúÏßÄ Ïã§ÏãúÍ∞Ñ Íµ¨ÎèÖ
   */
  subscribeToMessages(roomId: string, callback: (messages: ChatMessage[]) => void) {
    const messagesRef = ref(database, `chats/${roomId}/messages`);
    const messagesQuery = query(
      messagesRef,
      orderByChild('timestamp'),
      limitToLast(50)
    );
    
    const unsubscribe = onValue(messagesQuery, (snapshot) => {
      const messages: ChatMessage[] = [];
      
      snapshot.forEach((childSnapshot) => {
        const messageData = childSnapshot.val();
        messages.push({
          id: childSnapshot.key!,
          ...messageData
        });
      });
      
      callback(messages);
    });
    
    return () => off(messagesQuery, 'value', unsubscribe);
  }
  
  /**
   * Ï±ÑÌåÖÎ∞© ÏÉùÏÑ± ÎòêÎäî Ï∞∏Ïó¨
   */
  async joinRoom(roomId: string, userId: string, userNickname: string) {
    const roomRef = ref(database, `chats/${roomId}/participants/${userId}`);
    
    await push(roomRef, {
      nickname: userNickname,
      joinedAt: Date.now(),
      lastSeen: Date.now()
    });
  }
}

export const chatService = new ChatService();
```

---

## 7. Google Analytics

### üìä Google Analytics 4 ÏÑ§Ï†ï

#### GA4 ÏÑ§Ï†ï
```typescript
// utils/analytics.ts
declare global {
  interface Window {
    gtag: (...args: any[]) => void;
  }
}

class Analytics {
  private initialized = false;
  
  /**
   * GA4 Ï¥àÍ∏∞Ìôî
   */
  init(measurementId: string) {
    if (this.initialized) return;
    
    // GA4 Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎìú
    const script1 = document.createElement('script');
    script1.async = true;
    script1.src = `https://www.googletagmanager.com/gtag/js?id=${measurementId}`;
    document.head.appendChild(script1);
    
    // GA4 ÏÑ§Ï†ï
    const script2 = document.createElement('script');
    script2.innerHTML = `
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '${measurementId}');
    `;
    document.head.appendChild(script2);
    
    this.initialized = true;
  }
  
  /**
   * ÌéòÏù¥ÏßÄ Î∑∞ Ï∂îÏ†Å
   */
  trackPageView(pagePath: string, pageTitle?: string) {
    if (typeof window.gtag === 'function') {
      window.gtag('config', process.env.REACT_APP_GA_MEASUREMENT_ID!, {
        page_path: pagePath,
        page_title: pageTitle
      });
    }
  }
  
  /**
   * Ïù¥Î≤§Ìä∏ Ï∂îÏ†Å
   */
  trackEvent(eventName: string, parameters?: Record<string, any>) {
    if (typeof window.gtag === 'function') {
      window.gtag('event', eventName, parameters);
    }
  }
  
  /**
   * ÏÇ¨Ïö©Ïûê ÏÜçÏÑ± ÏÑ§Ï†ï
   */
  setUserProperty(propertyName: string, value: string) {
    if (typeof window.gtag === 'function') {
      window.gtag('config', process.env.REACT_APP_GA_MEASUREMENT_ID!, {
        custom_map: {
          [propertyName]: value
        }
      });
    }
  }
}

export const analytics = new Analytics();

// ÏùºÎ∞òÏ†ÅÏù∏ Ïù¥Î≤§Ìä∏ Ï∂îÏ†Å Ìó¨Ìçº
export const trackUserAction = (action: string, category: string, label?: string) => {
  analytics.trackEvent(action, {
    event_category: category,
    event_label: label
  });
};

export const trackPageView = (pageName: string) => {
  analytics.trackPageView(window.location.pathname, pageName);
};
```

---

## 8. Ïù¥Î©îÏùº ÏÑúÎπÑÏä§

### üìß Ïù¥Î©îÏùº Î∞úÏÜ° ÏÑúÎπÑÏä§ (Í≥ÑÌöç)

#### SMTP ÏÑ§Ï†ï
```php
// src/config/mail.php
return [
    'smtp' => [
        'host' => 'smtp.gmail.com',
        'port' => 587,
        'encryption' => 'tls',
        'username' => 'your_email@gmail.com',
        'password' => 'your_app_password',
        'from_email' => 'noreply@topmktx.com',
        'from_name' => 'ÌÉëÎßàÏºÄÌåÖ'
    ]
];
```

#### Ïù¥Î©îÏùº Ìó¨Ìçº ÌÅ¥ÎûòÏä§
```php
// src/helpers/MailHelper.php
class MailHelper {
    private static $config;
    
    public static function init() {
        self::$config = require_once __DIR__ . '/../config/mail.php';
    }
    
    /**
     * Ïù¥Î©îÏùº Î∞úÏÜ°
     */
    public static function sendMail($to, $subject, $body, $isHtml = true) {
        // PHPMailer ÎòêÎäî SwiftMailer ÏÇ¨Ïö©
        // Íµ¨ÌòÑ ÏòàÏ†ï
    }
    
    /**
     * ÌöåÏõêÍ∞ÄÏûÖ ÌôòÏòÅ Ïù¥Î©îÏùº
     */
    public static function sendWelcomeEmail($email, $nickname) {
        $subject = 'ÌÉëÎßàÏºÄÌåÖÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§!';
        $body = self::getWelcomeEmailTemplate($nickname);
        
        return self::sendMail($email, $subject, $body);
    }
    
    /**
     * ÎπÑÎ∞ÄÎ≤àÌò∏ Ïû¨ÏÑ§Ï†ï Ïù¥Î©îÏùº
     */
    public static function sendPasswordResetEmail($email, $resetToken) {
        $subject = 'ÎπÑÎ∞ÄÎ≤àÌò∏ Ïû¨ÏÑ§Ï†ï ÏöîÏ≤≠';
        $body = self::getPasswordResetTemplate($resetToken);
        
        return self::sendMail($email, $subject, $body);
    }
}
```

---

## 9. ÌååÏùº Ï†ÄÏû•ÏÜå

### ‚òÅÔ∏è ÌÅ¥ÎùºÏö∞Îìú Ï†ÄÏû•ÏÜå Ïó∞Îèô (Í≥ÑÌöç)

#### AWS S3 ÏÑ§Ï†ï
```php
// src/config/storage.php
return [
    's3' => [
        'key' => 'your_aws_access_key',
        'secret' => 'your_aws_secret_key',
        'region' => 'ap-northeast-2',
        'bucket' => 'topmkt-uploads',
        'url' => 'https://topmkt-uploads.s3.ap-northeast-2.amazonaws.com'
    ]
];
```

---

## 10. Î™®ÎãàÌÑ∞ÎßÅ ÎèÑÍµ¨

### üìà ÏÑ±Îä• Î™®ÎãàÌÑ∞ÎßÅ (Í≥ÑÌöç)

#### Sentry ÏóêÎü¨ Ï∂îÏ†Å
```typescript
// utils/sentry.ts
import * as Sentry from '@sentry/react';

export const initSentry = () => {
  Sentry.init({
    dsn: process.env.REACT_APP_SENTRY_DSN,
    environment: process.env.NODE_ENV,
    tracesSampleRate: 1.0
  });
};

export const captureError = (error: Error, context?: Record<string, any>) => {
  Sentry.captureException(error, { extra: context });
};
```

---

## üéØ Ïó∞Îèô ÏÉÅÌÉú Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏

### ‚úÖ ÌòÑÏû¨ Ïö¥ÏòÅ Ï§ë
- [ ] ÏïåÎ¶¨Í≥† SMS API Ï†ïÏÉÅ ÏûëÎèô
- [ ] reCAPTCHA v3 Ïä§Ìå∏ Î∞©ÏßÄ ÌôúÏÑ±Ìôî
- [ ] ÎÑ§Ïù¥Î≤Ñ ÏßÄÎèÑ API Ï†ïÏÉÅ ÌëúÏãú
- [ ] Ïπ¥Ïπ¥Ïò§ Ï£ºÏÜå Í≤ÄÏÉâ Ï†ïÏÉÅ ÏûëÎèô
- [ ] Firebase Ïã§ÏãúÍ∞Ñ Ï±ÑÌåÖ Ïö¥ÏòÅ

### üîÑ ÏÑ§Ï†ï ÏßÑÌñâ Ï§ë
- [ ] Google Analytics 4 Îç∞Ïù¥ÌÑ∞ ÏàòÏßë
- [ ] ÏÑ±Îä• Î™®ÎãàÌÑ∞ÎßÅ ÎèÑÍµ¨ Ïó∞Îèô

### üìã Ìñ•ÌõÑ Í≥ÑÌöç
- [ ] Ïù¥Î©îÏùº Î∞úÏÜ° ÏÑúÎπÑÏä§ Íµ¨Ï∂ï
- [ ] ÌÅ¥ÎùºÏö∞Îìú ÌååÏùº Ï†ÄÏû•ÏÜå Ïó∞Îèô
- [ ] ÏóêÎü¨ Ï∂îÏ†Å ÏãúÏä§ÌÖú ÎèÑÏûÖ

---

## üìû ÏßÄÏõê Î∞è Î¨∏Ïùò

### üÜò API Í¥ÄÎ†® Î¨∏Ïùò
- **Í∏∞Ïà† ÏßÄÏõê**: api@topmktx.com
- **Í≤∞Ï†ú Î¨∏Ïùò**: billing@topmktx.com
- **Î≥¥Ïïà Î¨∏Ï†ú**: security@topmktx.com

### üìö Í¥ÄÎ†® Î¨∏ÏÑú
- [Î≥¥Ïïà Í∞ÄÏù¥Îìú](17.Î≥¥Ïïà_Í∞ÄÏù¥Îìú.md)
- [ÏÑ±Îä• ÏµúÏ†ÅÌôî Í∞ÄÏù¥Îìú](15.ÏÑ±Îä•_ÏµúÏ†ÅÌôî_Í∞ÄÏù¥Îìú.md)
- [React Í∞úÎ∞ú Í∞ÄÏù¥Îìú](12.React_Í∞úÎ∞ú_Í∞ÄÏù¥Îìú.md)

---

*üìù Î¨∏ÏÑú ÏûëÏÑ±Ïûê: API Ïó∞ÎèôÌåÄ*  
*üìß Î¨∏Ïùò: integration@topmktx.com*  
*üîÑ ÏóÖÎç∞Ïù¥Ìä∏: ÏÉàÎ°úÏö¥ ÏÑúÎπÑÏä§ Ïó∞Îèô Ïãú*