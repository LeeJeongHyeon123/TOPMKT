# íƒ‘ë§ˆì¼€íŒ… í”Œë«í¼ DB êµ¬ì¡°

**ìµœì¢… ìˆ˜ì •ì¼:** 2025-07-09 KST  
**ìƒíƒœ:** ì‹¤ì œ êµ¬í˜„ëœ í…Œì´ë¸” êµ¬ì¡° ì™„ë£Œ + ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ API ì—°ë™ ìœ„ê²½ë„ í•„ë“œ ì¶”ê°€ + ì´ë²¤íŠ¸ ë§ˆê°ì¼ ì‹œìŠ¤í…œ + UTF-8mb4 ì¸ì½”ë”© ì™„ë£Œ

---

ì»¤ë®¤ë‹ˆí‹° ê¸°ë°˜ í”Œë«í¼ì˜ ì£¼ìš” ë°ì´í„° ëª¨ë¸ì„ ì •ì˜í•©ë‹ˆë‹¤. ëª¨ë“  í…Œì´ë¸”ì€ MariaDB InnoDB ìŠ¤í† ë¦¬ì§€ ì—”ì§„ì„ ì‚¬ìš©í•˜ë©°, ì™¸ë˜ í‚¤ ì œì•½ê³¼ ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë°ì´í„° ë¬´ê²°ì„± ë° ì¡°íšŒ ì„±ëŠ¥ì„ ë³´ì¥í•©ë‹ˆë‹¤.

**ğŸ¯ í˜„ì¬ êµ¬í˜„ ìƒíƒœ:** íšŒì›ê°€ì…/ë¡œê·¸ì¸/ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ ì‹œìŠ¤í…œ ì™„ì „ êµ¬ë™

## ER ë‹¤ì´ì–´ê·¸ë¨

```mermaid
erDiagram
    USERS {
        INT id PK "Primary Key"
        VARCHAR phone "Unique"
        VARCHAR nickname "Unique"
        VARCHAR email "Unique"
        VARCHAR password_hash
        BOOLEAN phone_verified
        BOOLEAN email_verified
        ENUM status
        ENUM role
        TEXT bio
        DATE birth_date
        ENUM gender
        VARCHAR profile_image_original
        VARCHAR profile_image_profile
        VARCHAR profile_image_thumb
        TIMESTAMP created_at
        TIMESTAMP updated_at
    }
    USER_SESSIONS {
        VARCHAR id PK "Session ID"
        INT user_id FK "â†’ USERS.id"
        VARCHAR ip_address
        TEXT user_agent
        TIMESTAMP last_activity
        TIMESTAMP created_at
    }
    USER_LOGS {
        INT id PK
        INT user_id FK "â†’ USERS.id"
        VARCHAR action
        TEXT description
        VARCHAR ip_address
        TEXT user_agent
        JSON extra_data
        TIMESTAMP created_at
    }
    VERIFICATION_CODES {
        INT id PK
        VARCHAR phone
        VARCHAR code
        ENUM type
        INT attempts
        BOOLEAN is_used
        TIMESTAMP expires_at
        TIMESTAMP created_at
    }
    POSTS {
        INT id PK
        INT user_id FK "â†’ USERS.id"
        INT category_id
        VARCHAR title
        TEXT content
        VARCHAR image_path
        INT view_count
        INT like_count
        INT comment_count
        ENUM status
        TIMESTAMP created_at
        TIMESTAMP updated_at
    }
    COMMENTS {
        INT id PK
        INT post_id FK "â†’ POSTS.id"
        INT user_id FK "â†’ USERS.id"
        INT parent_id FK "â†’ COMMENTS.id"
        TEXT content
        ENUM status
        TIMESTAMP created_at
        TIMESTAMP updated_at
    }
    SETTINGS {
        VARCHAR key_name PK
        TEXT value
        VARCHAR description
        ENUM type
        BOOLEAN is_public
        TIMESTAMP updated_at
    }

    USERS ||--o{ POSTS : "writes"
    USERS ||--o{ COMMENTS : "writes"
    POSTS ||--o{ COMMENTS : "has"
    USERS ||--o{ USER_SESSIONS : "owns"
    USERS ||--o{ USER_LOGS : "logs"
    COMMENTS ||--o{ COMMENTS : "replies"
```

## ğŸ“‹ ì‹¤ì œ êµ¬í˜„ëœ í…Œì´ë¸” ì •ì˜

### 1. users (íšŒì› ì •ë³´)
- **ì„¤ëª…:** ì‚¬ìš©ì ê³„ì • ì •ë³´, ì¸ì¦ ìƒíƒœ, ê¶Œí•œ ê´€ë¦¬ë¥¼ ìœ„í•œ í…Œì´ë¸”
- **ì£¼ìš” ì»¬ëŸ¼:**
  - `id` INT AUTO_INCREMENT PRIMARY KEY
  - `nickname` VARCHAR(50) NOT NULL UNIQUE (ë‹‰ë„¤ì„)
  - `phone` VARCHAR(20) NOT NULL UNIQUE (íœ´ëŒ€í° ë²ˆí˜¸)
  - `email` VARCHAR(100) NOT NULL UNIQUE (ì´ë©”ì¼)
  - `bio` TEXT NULL (ìê¸°ì†Œê°œ)
  - `birth_date` DATE NULL (ìƒë…„ì›”ì¼)
  - `gender` ENUM('M','F','OTHER') NULL (ì„±ë³„)
  - `profile_image_original` VARCHAR(255) NULL (ì›ë³¸ í”„ë¡œí•„ ì´ë¯¸ì§€)
  - `profile_image_profile` VARCHAR(255) NULL (í”„ë¡œí•„ìš© ì´ë¯¸ì§€)
  - `profile_image_thumb` VARCHAR(255) NULL (ì¸ë„¤ì¼ ì´ë¯¸ì§€)
  - `website_url` VARCHAR(255) NULL (ì›¹ì‚¬ì´íŠ¸ URL)
  - `social_links` LONGTEXT NULL (ì†Œì…œ ë§í¬ JSON)
  - `profile_image` VARCHAR(255) NULL (ë ˆê±°ì‹œ í”„ë¡œí•„ ì´ë¯¸ì§€)
  - `password_hash` VARCHAR(255) NOT NULL (ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸)
  - `marketing_agreed` BOOLEAN DEFAULT 0 (ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹  ë™ì˜)
  - `phone_verified` BOOLEAN DEFAULT 0 (íœ´ëŒ€í° ì¸ì¦ ì—¬ë¶€)
  - `email_verified` BOOLEAN DEFAULT 0 (ì´ë©”ì¼ ì¸ì¦ ì—¬ë¶€)
  - `login_attempts` INT DEFAULT 0 (ë¡œê·¸ì¸ ì‹¤íŒ¨ íšŸìˆ˜)
  - `locked_until` TIMESTAMP NULL (ê³„ì • ì ê¸ˆ í•´ì œ ì‹œê°„)
  - `last_login` TIMESTAMP NULL (ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„)
  - `remember_token` VARCHAR(64) NULL (ìë™ ë¡œê·¸ì¸ í† í°)
  - `remember_expires` DATETIME NULL (ìë™ ë¡œê·¸ì¸ í† í° ë§Œë£Œì¼)
  - `status` ENUM('active','inactive','suspended','deleted') DEFAULT 'active' (ê³„ì • ìƒíƒœ)
  - `role` ENUM('ROLE_USER', 'ROLE_CORP', 'ROLE_ADMIN') DEFAULT 'ROLE_USER' (ì‚¬ìš©ì ì—­í• )
  - `extra_data` LONGTEXT NULL (í™•ì¥ ë°ì´í„° JSON)
  - `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  - `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

**íšŒì› ì—­í•  (role) ì •ì˜:**
- `ROLE_USER`: ì¼ë°˜íšŒì› - ì»¤ë®¤ë‹ˆí‹° ê¸°ë³¸ ê¸°ëŠ¥ ì‚¬ìš©
- `ROLE_CORP`: ê¸°ì—…íšŒì› - íšŒì‚¬ ì†Œê°œ, í–‰ì‚¬/ê°•ì˜ ë“±ë¡ ê¶Œí•œ (ë¯¸êµ¬í˜„)
- `ROLE_ADMIN`: ê´€ë¦¬ì - ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬ ê¶Œí•œ

### 2. user_sessions (íšŒì› ì„¸ì…˜ ê´€ë¦¬)
- **ì„¤ëª…:** ì‚¬ìš©ì ì„¸ì…˜ ê´€ë¦¬ ë° ë³´ì•ˆì„ ìœ„í•œ í…Œì´ë¸”
- **ì£¼ìš” ì»¬ëŸ¼:**
  - `id` VARCHAR(128) PRIMARY KEY (ì„¸ì…˜ ID)
  - `user_id` INT NOT NULL (ì‚¬ìš©ì ID)
  - `ip_address` VARCHAR(45) NOT NULL (IP ì£¼ì†Œ)
  - `user_agent` TEXT NULL (User Agent)
  - `last_activity` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
  - `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
- **ì œì•½ ë° ì¸ë±ìŠ¤:**
  - FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE
  - INDEX (`user_id`), INDEX (`last_activity`)

### 3. user_logs (ì‚¬ìš©ì í™œë™ ë¡œê·¸)
- **ì„¤ëª…:** ì‚¬ìš©ì í™œë™ ë° ì‹œìŠ¤í…œ ì´ë²¤íŠ¸ ê¸°ë¡ì„ ìœ„í•œ í…Œì´ë¸”
- **ì£¼ìš” ì»¬ëŸ¼:**
  - `id` INT AUTO_INCREMENT PRIMARY KEY
  - `user_id` INT NULL (ì‚¬ìš©ì ID, ë¹„íšŒì› í™œë™ë„ ê¸°ë¡)
  - `action` VARCHAR(50) NOT NULL (í™œë™ ìœ í˜•: LOGIN, LOGOUT, SIGNUP ë“±)
  - `description` TEXT NULL (ìƒì„¸ ì„¤ëª…)
  - `ip_address` VARCHAR(45) NOT NULL (IP ì£¼ì†Œ)
  - `user_agent` TEXT NULL (User Agent)
  - `extra_data` JSON NULL (ì¶”ê°€ ë°ì´í„°)
  - `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
- **ì œì•½ ë° ì¸ë±ìŠ¤:**
  - FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE SET NULL
  - INDEX (`user_id`), INDEX (`action`), INDEX (`created_at`)

### 4. verification_codes (ì¸ì¦ë²ˆí˜¸ ì„ì‹œ ì €ì¥)
- **ì„¤ëª…:** SMS ì¸ì¦ë²ˆí˜¸ ì„ì‹œ ì €ì¥ ë° ê´€ë¦¬ë¥¼ ìœ„í•œ í…Œì´ë¸”
- **ì£¼ìš” ì»¬ëŸ¼:**
  - `id` INT AUTO_INCREMENT PRIMARY KEY
  - `phone` VARCHAR(13) NOT NULL (íœ´ëŒ€í° ë²ˆí˜¸)
  - `code` VARCHAR(6) NOT NULL (ì¸ì¦ë²ˆí˜¸)
  - `type` ENUM('SIGNUP', 'LOGIN', 'PASSWORD_RESET') NOT NULL (ì¸ì¦ ìœ í˜•)
  - `attempts` INT DEFAULT 0 (ì‹œë„ íšŸìˆ˜)
  - `is_used` BOOLEAN DEFAULT FALSE (ì‚¬ìš© ì—¬ë¶€)
  - `expires_at` TIMESTAMP NOT NULL (ë§Œë£Œ ì‹œê°„)
  - `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
- **ì œì•½ ë° ì¸ë±ìŠ¤:**
  - INDEX (`phone`), INDEX (`code`), INDEX (`expires_at`)

### 5. posts (ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€)
- **ì„¤ëª…:** ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ ì •ë³´ ë° í†µê³„ë¥¼ ê´€ë¦¬í•˜ëŠ” í…Œì´ë¸”
- **ì£¼ìš” ì»¬ëŸ¼:**
  - `id` INT AUTO_INCREMENT PRIMARY KEY
  - `user_id` INT NOT NULL (ì‘ì„±ì ID)
  - `category_id` INT NULL (ì¹´í…Œê³ ë¦¬ ID, í–¥í›„ í™•ì¥ìš©)
  - `title` VARCHAR(200) NOT NULL (ì œëª©)
  - `content` TEXT NOT NULL (ë‚´ìš©)
  - `image_path` VARCHAR(255) NULL (ì²¨ë¶€ ì´ë¯¸ì§€ ê²½ë¡œ)
  - `view_count` INT DEFAULT 0 (ì¡°íšŒìˆ˜)
  - `like_count` INT DEFAULT 0 (ì¢‹ì•„ìš” ìˆ˜)
  - `comment_count` INT DEFAULT 0 (ëŒ“ê¸€ ìˆ˜)
  - `status` ENUM('published','draft','deleted') DEFAULT 'published' (ê²Œì‹œê¸€ ìƒíƒœ)
  - `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  - `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
- **ì œì•½ ë° ì¸ë±ìŠ¤:**
  - FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE
  - INDEX (`user_id`), INDEX (`category_id`), INDEX (`created_at`), INDEX (`status`)
  - INDEX `idx_posts_list_performance` (`status`, `created_at` DESC) (ëª©ë¡ ì¡°íšŒ ì„±ëŠ¥ ìµœì í™”)

### 6. comments (ëŒ“ê¸€)
- **ì„¤ëª…:** ëŒ“ê¸€ ë° ëŒ€ëŒ“ê¸€ ì •ë³´ ê´€ë¦¬ í…Œì´ë¸”
- **ì£¼ìš” ì»¬ëŸ¼:**
  - `id` INT AUTO_INCREMENT PRIMARY KEY
  - `post_id` INT NOT NULL (ê²Œì‹œê¸€ ID)
  - `user_id` INT NOT NULL (ì‘ì„±ì ID)
  - `parent_id` INT NULL (ë¶€ëª¨ ëŒ“ê¸€ ID, ëŒ€ëŒ“ê¸€ìš©)
  - `content` TEXT NOT NULL (ëŒ“ê¸€ ë‚´ìš©)
  - `status` ENUM('active','deleted') DEFAULT 'active' (ëŒ“ê¸€ ìƒíƒœ)
  - `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  - `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
- **ì œì•½ ë° ì¸ë±ìŠ¤:**
  - FOREIGN KEY (`post_id`) REFERENCES `posts`(`id`) ON DELETE CASCADE
  - FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE
  - FOREIGN KEY (`parent_id`) REFERENCES `comments`(`id`) ON DELETE CASCADE
  - INDEX (`post_id`), INDEX (`user_id`), INDEX (`parent_id`), INDEX (`status`)

### 7. lectures (ê°•ì˜/ì´ë²¤íŠ¸ ì •ë³´) âœ… êµ¬í˜„ ì™„ë£Œ
- **ì„¤ëª…:** ê°•ì˜ ì¼ì • ë° ì´ë²¤íŠ¸ ì •ë³´ ê´€ë¦¬ë¥¼ ìœ„í•œ í…Œì´ë¸” (ì™„ì „ êµ¬í˜„)
- **ì£¼ìš” ì»¬ëŸ¼:**
  - `id` INT AUTO_INCREMENT PRIMARY KEY
  - `user_id` INT NOT NULL (ë“±ë¡ì ID)
  - `title` VARCHAR(200) NOT NULL (ê°•ì˜ ì œëª©)
  - `description` TEXT NOT NULL (ê°•ì˜ ì„¤ëª…)
  - `instructor_name` VARCHAR(100) NOT NULL (ê°•ì‚¬ëª…)
  - `instructor_info` TEXT NULL (ê°•ì‚¬ ì •ë³´)
  - `start_date` DATE NOT NULL (ì‹œì‘ì¼)
  - `end_date` DATE NOT NULL (ì¢…ë£Œì¼)
  - `start_time` TIME NOT NULL (ì‹œì‘ì‹œê°„)
  - `end_time` TIME NOT NULL (ì¢…ë£Œì‹œê°„)
  - `timezone` VARCHAR(50) DEFAULT 'Asia/Seoul' (ì‹œê°„ëŒ€)
  - `location_type` ENUM('online','offline','hybrid') DEFAULT 'offline' (ì§„í–‰ ë°©ì‹)
  - `venue_name` VARCHAR(200) NULL (ì¥ì†Œëª…)
  - `venue_address` TEXT NULL (ì¥ì†Œ ì£¼ì†Œ)
  - `venue_latitude` DECIMAL(10,8) NULL (ìœ„ë„) **ğŸ†• 2025-06-19 ì¶”ê°€**
  - `venue_longitude` DECIMAL(11,8) NULL (ê²½ë„) **ğŸ†• 2025-06-19 ì¶”ê°€**
  - `online_link` VARCHAR(500) NULL (ì˜¨ë¼ì¸ ë§í¬)
  - `max_participants` INT NULL (ìµœëŒ€ ì°¸ê°€ì ìˆ˜)
  - `registration_fee` INT DEFAULT 0 (ì°¸ê°€ë¹„)
  - `registration_deadline` DATETIME NULL (ë“±ë¡ ë§ˆê°ì¼) **ğŸ†• 2025-07-09 ì‹œìŠ¤í…œ êµ¬í˜„ ì™„ë£Œ**
  - `category` ENUM('seminar','workshop','conference','webinar','training') DEFAULT 'seminar'
  - `content_type` ENUM('lecture','event') DEFAULT 'lecture' (ê°•ì˜/í–‰ì‚¬ êµ¬ë¶„)
  - `event_scale` ENUM('small','medium','large') NULL (í–‰ì‚¬ ê·œëª¨)
  - `has_networking` BOOLEAN DEFAULT FALSE (ë„¤íŠ¸ì›Œí‚¹ ì—¬ë¶€)
  - `sponsor_info` TEXT NULL (í˜‘ì°¬ì‚¬ ì •ë³´)
  - `dress_code` ENUM('casual','business_casual','business','formal') NULL
  - `parking_info` TEXT NULL (ì£¼ì°¨ ì •ë³´)
  - `difficulty_level` ENUM('beginner','intermediate','advanced','all') DEFAULT 'all'
  - `tags` JSON NULL (íƒœê·¸ ì •ë³´)
  - `banner_image` VARCHAR(500) NULL (ë°°ë„ˆ ì´ë¯¸ì§€)
  - `attachments` JSON NULL (ì²¨ë¶€íŒŒì¼)
  - `requirements` TEXT NULL (ì°¸ê°€ ìš”ê±´)
  - `benefits` TEXT NULL (í˜œíƒ ì •ë³´)
  - `status` ENUM('draft','published','cancelled','completed') DEFAULT 'draft'
  - `is_featured` BOOLEAN DEFAULT FALSE (ì¶”ì²œ ê°•ì˜ ì—¬ë¶€)
  - `view_count` INT DEFAULT 0 (ì¡°íšŒìˆ˜)
  - `registration_count` INT DEFAULT 0 (ë“±ë¡ì ìˆ˜)
  - `youtube_video` VARCHAR(500) NULL (ìœ íŠœë¸Œ ì˜ìƒ) **ğŸ†• 2025-07-09 ê²€ì¦ ê°•í™”**
  - `instructor_image` VARCHAR(500) NULL (ê°•ì‚¬ ì´ë¯¸ì§€) **ğŸ”„ 2025-07-09 ë‹¤ì¤‘ ë“±ë¡ ê°œì„ **
  - `instructors_json` TEXT NULL (ê°•ì‚¬ ì •ë³´ JSON) **ğŸ”„ 2025-07-09 ë‹¤ì¤‘ ë“±ë¡ ì‹œìŠ¤í…œ ì™„ì„±**
  - `lecture_images` TEXT NULL (ê°•ì˜ ì´ë¯¸ì§€ JSON)
  - `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  - `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
- **ì œì•½ ë° ì¸ë±ìŠ¤:**
  - FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE
  - INDEX (`user_id`), INDEX (`start_date`), INDEX (`category`), INDEX (`content_type`)
  - INDEX (`status`), INDEX (`is_featured`)


### 8. settings (ì‹œìŠ¤í…œ ì„¤ì •)
- **ì„¤ëª…:** ì‹œìŠ¤í…œ ì „ì—­ ì„¤ì • ê´€ë¦¬ë¥¼ ìœ„í•œ í…Œì´ë¸”
- **ì£¼ìš” ì»¬ëŸ¼:**
  - `key_name` VARCHAR(100) PRIMARY KEY (ì„¤ì • í‚¤)
  - `value` TEXT NULL (ì„¤ì • ê°’)
  - `description` VARCHAR(255) NULL (ì„¤ì • ì„¤ëª…)
  - `type` ENUM('STRING', 'INTEGER', 'BOOLEAN', 'JSON') DEFAULT 'STRING' (ê°’ íƒ€ì…)
  - `is_public` BOOLEAN DEFAULT FALSE (ê³µê°œ ì„¤ì • ì—¬ë¶€)
  - `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP

---

## ğŸ”® í–¥í›„ í™•ì¥ ê³„íš (ë¯¸êµ¬í˜„ í…Œì´ë¸”)

### lecture_registrations (ê°•ì˜ ì‹ ì²­ ê´€ë¦¬)
- **ì„¤ëª…:** ê°•ì˜ ì°¸ê°€ ì‹ ì²­ ê´€ë¦¬ í…Œì´ë¸” (í–¥í›„ êµ¬í˜„ ì˜ˆì •)
- **ì˜ˆì • ì»¬ëŸ¼:**
  - `id` INT AUTO_INCREMENT PRIMARY KEY
  - `lecture_id` INT NOT NULL (lectures.id ì°¸ì¡°)
  - `user_id` INT NOT NULL (users.id ì°¸ì¡°)
  - `participant_name` VARCHAR(100) NOT NULL
  - `participant_email` VARCHAR(100) NOT NULL
  - `participant_phone` VARCHAR(20) NOT NULL
  - `status` ENUM('pending','confirmed','cancelled') DEFAULT 'pending'
  - `payment_status` ENUM('unpaid','paid','refunded') DEFAULT 'unpaid'
  - `registration_date` TIMESTAMP DEFAULT CURRENT_TIMESTAMP

### 1. company_profiles (ê¸°ì—…íšŒì› ì •ë³´)
- **ì„¤ëª…:** ê¸°ì—…íšŒì› ì„¸ë¶€ ì •ë³´ ê´€ë¦¬ í…Œì´ë¸” (2ì°¨ ê°œë°œ ì˜ˆì •)
- **ì˜ˆì • ì»¬ëŸ¼:**
  - `company_id` INT PRIMARY KEY
  - `user_id` INT NOT NULL (users.id ì°¸ì¡°)
  - `company_name` VARCHAR(255) NOT NULL
  - `business_registration` VARCHAR(100) NOT NULL
  - `approved_at` TIMESTAMP NULL
  - `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP

### 2. tags (íƒœê·¸ ì‹œìŠ¤í…œ)
- **ì„¤ëª…:** ê²Œì‹œê¸€ íƒœê·¸ ê´€ë¦¬ í…Œì´ë¸” (í–¥í›„ êµ¬í˜„ ì˜ˆì •)
- **ì˜ˆì • ì»¬ëŸ¼:**
  - `tag_id` INT AUTO_INCREMENT PRIMARY KEY
  - `name` VARCHAR(50) NOT NULL UNIQUE

### 3. post_tags (ê²Œì‹œê¸€-íƒœê·¸ ë§¤í•‘)
- **ì„¤ëª…:** ê²Œì‹œê¸€ê³¼ íƒœê·¸ì˜ ë‹¤ëŒ€ë‹¤ ê´€ê³„ í…Œì´ë¸”
- **ì˜ˆì • ì»¬ëŸ¼:**
  - `post_id` INT NOT NULL
  - `tag_id` INT NOT NULL
  - PRIMARY KEY (`post_id`, `tag_id`)

### 4. notifications (ì•Œë¦¼ ì‹œìŠ¤í…œ)
- **ì„¤ëª…:** ì‹¤ì‹œê°„ ì•Œë¦¼ ì •ë³´ ì €ì¥ í…Œì´ë¸” (í–¥í›„ êµ¬í˜„ ì˜ˆì •)
- **ì˜ˆì • ì»¬ëŸ¼:**
  - `notification_id` INT AUTO_INCREMENT PRIMARY KEY
  - `user_id` INT NOT NULL
  - `type` VARCHAR(50) NOT NULL
  - `reference_id` INT NULL
  - `message` VARCHAR(255) NOT NULL
  - `is_read` BOOLEAN DEFAULT FALSE
  - `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP

---

## ğŸ“Š ê´€ê³„ ë° ì¸ë±ìŠ¤ ì „ëµ

### ì™¸ë˜ í‚¤ ì œì•½ ì„¤ì •
- **ì‚¬ìš©ì ê´€ë ¨:** `user_sessions.user_id`, `user_logs.user_id`, `posts.user_id`, `comments.user_id`
- **ê²Œì‹œê¸€ ê´€ë ¨:** `comments.post_id`, `comments.parent_id` (ëŒ€ëŒ“ê¸€)
- **CASCADE ì •ì±…:** ì‚¬ìš©ì ì‚­ì œ ì‹œ ê´€ë ¨ ë°ì´í„° ìë™ ì‚­ì œ (user_sessions, posts, comments)
- **SET NULL ì •ì±…:** ë¡œê·¸ ë°ì´í„°ëŠ” ì‚¬ìš©ì ì‚­ì œ í›„ì—ë„ ìœ ì§€ (user_logs.user_id)

### ì„±ëŠ¥ ìµœì í™” ì¸ë±ìŠ¤
- **ì‚¬ìš©ì í…Œì´ë¸”:** `phone`, `email`, `nickname`, `status`, `created_at`
- **ì„¸ì…˜ í…Œì´ë¸”:** `user_id`, `last_activity`
- **ë¡œê·¸ í…Œì´ë¸”:** `user_id`, `action`, `created_at`
- **ì¸ì¦ë²ˆí˜¸ í…Œì´ë¸”:** `phone`, `code`, `expires_at`
- **ê²Œì‹œê¸€ í…Œì´ë¸”:** `user_id`, `category_id`, `created_at`
- **ëŒ“ê¸€ í…Œì´ë¸”:** `post_id`, `user_id`, `parent_id`

### ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
- **ì—”ì§„:** InnoDB (íŠ¸ëœì­ì…˜, ì™¸ë˜í‚¤ ì§€ì›)
- **ë¬¸ìì…‹:** UTF8mb4 (ì´ëª¨ì§€ ì§€ì›)
- **ì½œë ˆì´ì…˜:** utf8mb4_unicode_ci (í•œê¸€ ì •ë ¬ ì§€ì›)

### í™•ì¥ì„± ê³ ë ¤ì‚¬í•­
- **íŒŒí‹°ì…”ë‹:** `user_logs` í…Œì´ë¸” ì›”ë³„ íŒŒí‹°ì…”ë‹ ê²€í†  (ëŒ€ìš©ëŸ‰ ë¡œê·¸ ë°ì´í„°)
- **ì½ê¸° ì „ìš© ë³µì œë³¸:** ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ Master-Slave êµ¬ì„± ê²€í† 
- **ìºì‹±:** Redisë¥¼ í™œìš©í•œ ì„¸ì…˜ ë° ìì£¼ ì¡°íšŒë˜ëŠ” ë°ì´í„° ìºì‹±

---

## ğŸ“ ì‹¤ì œ êµ¬í˜„ëœ DDL ì˜ˆì‹œ

```sql
-- íšŒì› í…Œì´ë¸” (ì‹¤ì œ êµ¬í˜„ëœ êµ¬ì¡°)
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nickname VARCHAR(50) NOT NULL UNIQUE,
    phone VARCHAR(20) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    bio TEXT NULL,
    birth_date DATE NULL,
    gender ENUM('M','F','OTHER') NULL,
    profile_image_original VARCHAR(255) NULL,
    profile_image_profile VARCHAR(255) NULL,
    profile_image_thumb VARCHAR(255) NULL,
    website_url VARCHAR(255) NULL,
    social_links LONGTEXT NULL,
    password_hash VARCHAR(255) NOT NULL,
    marketing_agreed BOOLEAN DEFAULT 0,
    phone_verified BOOLEAN DEFAULT 0,
    email_verified BOOLEAN DEFAULT 0,
    login_attempts INT DEFAULT 0,
    locked_until TIMESTAMP NULL,
    last_login TIMESTAMP NULL,
    remember_token VARCHAR(64) NULL,
    remember_expires DATETIME NULL,
    status ENUM('active','inactive','suspended','deleted') DEFAULT 'active',
    role ENUM('ROLE_USER', 'ROLE_CORP', 'ROLE_ADMIN') DEFAULT 'ROLE_USER',
    extra_data LONGTEXT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ í…Œì´ë¸” (ì‹¤ì œ êµ¬í˜„ëœ êµ¬ì¡°)
CREATE TABLE posts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    category_id INT NULL,
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    image_path VARCHAR(255) NULL,
    view_count INT DEFAULT 0,
    like_count INT DEFAULT 0,
    comment_count INT DEFAULT 0,
    status ENUM('published','draft','deleted') DEFAULT 'published',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_posts_list_performance (status, created_at DESC)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ëŒ“ê¸€ í…Œì´ë¸” (ì‹¤ì œ êµ¬í˜„ëœ êµ¬ì¡°)
CREATE TABLE comments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    post_id INT NOT NULL,
    user_id INT NOT NULL,
    parent_id INT NULL,
    content TEXT NOT NULL,
    status ENUM('active','deleted') DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (post_id) REFERENCES posts(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (parent_id) REFERENCES comments(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

---

## ğŸ¯ í˜„ì¬ êµ¬í˜„ ìƒíƒœ ìš”ì•½

### âœ… ì™„ì „ êµ¬í˜„ëœ ê¸°ëŠ¥
- **ì‚¬ìš©ì ê´€ë¦¬:** íšŒì›ê°€ì…, ë¡œê·¸ì¸, ì„¸ì…˜ ê´€ë¦¬, í”„ë¡œí•„ ê´€ë¦¬
- **ë³´ì•ˆ ì¸ì¦:** SMS ì¸ì¦, ì´ë©”ì¼ ì¸ì¦, ìë™ ë¡œê·¸ì¸(Remember Me)
- **ì»¤ë®¤ë‹ˆí‹°:** ê²Œì‹œê¸€ CRUD, í˜ì´ì§€ë„¤ì´ì…˜, ê²€ìƒ‰, ì´ë¯¸ì§€ ì—…ë¡œë“œ
- **ëŒ“ê¸€ ì‹œìŠ¤í…œ:** ëŒ“ê¸€ ì‘ì„±/ìˆ˜ì •/ì‚­ì œ, ëŒ€ëŒ“ê¸€, í˜ì´ì§€ë„¤ì´ì…˜
- **ë¡œê¹…:** ì‚¬ìš©ì í™œë™ ì¶”ì , ë³´ì•ˆ ì´ë²¤íŠ¸ ê¸°ë¡
- **ì‹¤ì‹œê°„ ì±„íŒ… ì‹œìŠ¤í…œ:** Firebase Realtime Database ê¸°ë°˜ ì±„íŒ… ì‹œìŠ¤í…œ ì™„ì „ êµ¬í˜„
- **ê°•ì˜/ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ:** lectures í…Œì´ë¸” ê¸°ë°˜ ì™„ì „ êµ¬í˜„ (2025-07-09 ì™„ë£Œ)
- **ì´ë²¤íŠ¸ ë§ˆê°ì¼ ì‹œìŠ¤í…œ:** ë“±ë¡ ë§ˆê°ì¼ ì„¤ì • ë° ìë™ ì°¨ë‹¨ ê¸°ëŠ¥ (2025-07-09 ì™„ë£Œ)
- **ê°•ì‚¬ ë‹¤ì¤‘ ë“±ë¡:** ë³µìˆ˜ ê°•ì‚¬ ì •ë³´ ì €ì¥ ë° ì´ë¯¸ì§€ ì—…ë¡œë“œ (2025-07-09 ì™„ë£Œ)

### ğŸ”„ í˜„ì¬ ë¯¸êµ¬í˜„ (ì»¨íŠ¸ë¡¤ëŸ¬ë§Œ ì¡´ì¬)
- **ì¢‹ì•„ìš” ê¸°ëŠ¥:** í…Œì´ë¸” ìŠ¤í‚¤ë§ˆëŠ” ìˆìœ¼ë‚˜ ê¸°ëŠ¥ ë¯¸êµ¬í˜„

### ğŸ”„ ë‹¤ìŒ êµ¬í˜„ ì˜ˆì •
- **ì¢‹ì•„ìš” ê¸°ëŠ¥:** ê²Œì‹œê¸€/ëŒ“ê¸€ ì¶”ì²œ ì‹œìŠ¤í…œ ì™„ì„±
- **ì•Œë¦¼ ì‹œìŠ¤í…œ:** ì‹¤ì‹œê°„ ì•Œë¦¼, FCM ì—°ë™
- **íƒœê·¸ ì‹œìŠ¤í…œ:** ê²Œì‹œê¸€ ë¶„ë¥˜ ë° ê²€ìƒ‰ ìµœì í™”

---

## ğŸŒ ë°ì´í„°ë² ì´ìŠ¤ ë¬¸ìì…‹ ì„¤ì • (2025-07-09 ì™„ë£Œ)

### UTF-8mb4 ì¸ì½”ë”© ì™„ì „ êµ¬í˜„

**êµ¬í˜„ ë°°ê²½:**
- í•œêµ­ì–´ ì œëª©/ë‚´ìš© ê¹¨ì§ í˜„ìƒ ì™„ì „ í•´ê²°
- ì´ëª¨ì§€ ë° íŠ¹ìˆ˜ ë¬¸ì ì™„ì „ ì§€ì›
- ê¸€ë¡œë²Œ ë‹¤êµ­ì–´ ì§€ì› ê¸°ë°˜ ë§ˆë ¨

**ë°ì´í„°ë² ì´ìŠ¤ ì „ì—­ ì„¤ì •:**
```sql
-- ë°ì´í„°ë² ì´ìŠ¤ ë¬¸ìì…‹ ì„¤ì •
ALTER DATABASE topmkt CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ì—°ê²° ì‹œ ë¬¸ìì…‹ ê°•ì œ ì„¤ì •
SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci;
SET character_set_client = utf8mb4;
SET character_set_connection = utf8mb4;
SET character_set_results = utf8mb4;
SET character_set_database = utf8mb4;
SET character_set_server = utf8mb4;
```

**í…Œì´ë¸” ë¬¸ìì…‹ ì„¤ì •:**
- ëª¨ë“  í…Œì´ë¸”: `DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci`
- VARCHAR, TEXT, JSON í•„ë“œ: ì™„ì „í•œ í•œêµ­ì–´ ì§€ì›
- ì´ëª¨ì§€ ë° íŠ¹ìˆ˜ ë¬¸ì: ì™„ì „í•œ ì €ì¥ ë° í‘œì‹œ ì§€ì›

**ì ìš© ë²”ìœ„:**
- âœ… `users` í…Œì´ë¸”: ë‹‰ë„¤ì„, ì´ë©”ì¼, í”„ë¡œí•„ ì •ë³´
- âœ… `posts` í…Œì´ë¸”: ê²Œì‹œê¸€ ì œëª©, ë‚´ìš©
- âœ… `comments` í…Œì´ë¸”: ëŒ“ê¸€ ë‚´ìš©
- âœ… `lectures` í…Œì´ë¸”: ê°•ì˜ ì œëª©, ì„¤ëª…, ê°•ì‚¬ ì •ë³´
- âœ… ëª¨ë“  TEXT, VARCHAR í•„ë“œ: í•œêµ­ì–´ ì™„ì „ ì§€ì›

**ê²€ì¦ ê²°ê³¼:**
- **ì´ì „**: "QA Ã­â€¦Å’Ã¬Å Â¤Ã­Å Â¸ Ã­â€“â€°Ã¬â€šÂ¬" (ê¹¨ì§„ ë¬¸ì)
- **í˜„ì¬**: "QA í…ŒìŠ¤íŠ¸ í–‰ì‚¬" (ì •ìƒ í‘œì‹œ)
- **ì„±ëŠ¥**: ì¸ì½”ë”© ë³€ê²½ í›„ ì„±ëŠ¥ ì €í•˜ ì—†ìŒ í™•ì¸
