# ğŸ”Œ ì™¸ë¶€ì„œë¹„ìŠ¤ ì—°ë™ ê°€ì´ë“œ

**ìµœì¢… ìˆ˜ì •ì¼:** 2025-12-26 KST  
**ë¬¸ì„œ ë²„ì „:** 1.0  
**ì ìš© ë²”ìœ„:** íƒ‘ë§ˆì¼€íŒ… í”Œë«í¼ ì™¸ë¶€ API ì—°ë™

---

## ğŸ“‹ ëª©ì°¨

1. [ì—°ë™ ì„œë¹„ìŠ¤ ê°œìš”](#1-ì—°ë™-ì„œë¹„ìŠ¤-ê°œìš”)
2. [SMS ì„œë¹„ìŠ¤ (ì•Œë¦¬ê³ )](#2-sms-ì„œë¹„ìŠ¤-ì•Œë¦¬ê³ )
3. [reCAPTCHA v3](#3-recaptcha-v3)
4. [ë„¤ì´ë²„ ì§€ë„ API](#4-ë„¤ì´ë²„-ì§€ë„-api)
5. [ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ API](#5-ì¹´ì¹´ì˜¤-ì£¼ì†Œ-ê²€ìƒ‰-api)
6. [Firebase ì‹¤ì‹œê°„ ì±„íŒ…](#6-firebase-ì‹¤ì‹œê°„-ì±„íŒ…)
7. [Google Analytics](#7-google-analytics)
8. [ì´ë©”ì¼ ì„œë¹„ìŠ¤](#8-ì´ë©”ì¼-ì„œë¹„ìŠ¤)
9. [íŒŒì¼ ì €ì¥ì†Œ](#9-íŒŒì¼-ì €ì¥ì†Œ)
10. [ëª¨ë‹ˆí„°ë§ ë„êµ¬](#10-ëª¨ë‹ˆí„°ë§-ë„êµ¬)

---

## 1. ì—°ë™ ì„œë¹„ìŠ¤ ê°œìš”

### ğŸ¯ í˜„ì¬ ì—°ë™ëœ ì„œë¹„ìŠ¤

| ì„œë¹„ìŠ¤ | ìš©ë„ | ìƒíƒœ | ë¹„ìš© |
|--------|------|------|------|
| **ì•Œë¦¬ê³  SMS** | ì¸ì¦ë²ˆí˜¸ ë°œì†¡ | ğŸŸ¢ ìš´ì˜ì¤‘ | ìœ ë£Œ |
| **reCAPTCHA v3** | ìŠ¤íŒ¸ ë°©ì§€ | ğŸŸ¢ ìš´ì˜ì¤‘ | ë¬´ë£Œ |
| **ë„¤ì´ë²„ ì§€ë„** | ê°•ì˜ ì¥ì†Œ í‘œì‹œ | ğŸŸ¢ ìš´ì˜ì¤‘ | ë¬´ë£Œ |
| **ì¹´ì¹´ì˜¤ ì£¼ì†Œê²€ìƒ‰** | ì •í™•í•œ ì£¼ì†Œ ì…ë ¥ | ğŸŸ¢ ìš´ì˜ì¤‘ | ë¬´ë£Œ |
| **Firebase** | ì‹¤ì‹œê°„ ì±„íŒ… | ğŸŸ¢ ìš´ì˜ì¤‘ | ë¶€ë¶„ìœ ë£Œ |
| **Google Analytics** | ì‚¬ìš©ì ë¶„ì„ | ğŸŸ¡ ì„¤ì •ì¤‘ | ë¬´ë£Œ |

### ğŸ“Š ì—°ë™ ìš°ì„ ìˆœìœ„

#### ğŸ”´ í•„ìˆ˜ (ì„œë¹„ìŠ¤ ìš´ì˜ì— í•„ìˆ˜)
- SMS ì¸ì¦ ì„œë¹„ìŠ¤
- reCAPTCHA ìŠ¤íŒ¸ ë°©ì§€
- ì£¼ì†Œ ê²€ìƒ‰ API

#### ğŸŸ¡ ê¶Œì¥ (ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ)
- ì§€ë„ ì„œë¹„ìŠ¤
- ì‹¤ì‹œê°„ ì±„íŒ…
- ì‚¬ìš©ì ë¶„ì„

#### ğŸŸ¢ ì„ íƒ (ë¶€ê°€ ê¸°ëŠ¥)
- ì´ë©”ì¼ ë°œì†¡
- í´ë¼ìš°ë“œ ì €ì¥ì†Œ
- ëª¨ë‹ˆí„°ë§ ë„êµ¬

---

## 2. SMS ì„œë¹„ìŠ¤ (ì•Œë¦¬ê³ )

### ğŸ“± ì•Œë¦¬ê³  SMS API ì—°ë™

#### ì„¤ì • íŒŒì¼
```php
// src/config/sms.php
return [
    'aligo' => [
        'api_key' => 'your_aligo_api_key',
        'user_id' => 'your_aligo_user_id',
        'sender' => '070-0000-0000',  // ë°œì‹ ë²ˆí˜¸
        'testmode' => false,          // true: í…ŒìŠ¤íŠ¸ ëª¨ë“œ
        'base_url' => 'https://apis.aligo.in/send/',
    ]
];
```

#### SMS ë°œì†¡ í—¬í¼ í´ë˜ìŠ¤
```php
// src/helpers/SmsHelper.php
class SmsHelper {
    private static $config;
    
    public static function init() {
        self::$config = require_once __DIR__ . '/../config/sms.php';
    }
    
    /**
     * ê¸°ë³¸ SMS ë°œì†¡
     */
    public static function sendSms($phone, $message) {
        $data = [
            'key' => self::$config['aligo']['api_key'],
            'user_id' => self::$config['aligo']['user_id'],
            'sender' => self::$config['aligo']['sender'],
            'receiver' => self::formatPhone($phone),
            'msg' => $message,
            'testmode_yn' => self::$config['aligo']['testmode'] ? 'Y' : 'N'
        ];
        
        return self::sendRequest($data);
    }
    
    /**
     * ì¸ì¦ë²ˆí˜¸ ë°œì†¡
     */
    public static function sendAuthCodeSms($phone, $authCode) {
        $message = "[íƒ‘ë§ˆì¼€íŒ…] ì¸ì¦ë²ˆí˜¸ëŠ” [{$authCode}]ì…ë‹ˆë‹¤. 3ë¶„ ë‚´ì— ì…ë ¥í•´ì£¼ì„¸ìš”.";
        return self::sendSms($phone, $message);
    }
    
    /**
     * í™˜ì˜ ë©”ì‹œì§€ ë°œì†¡
     */
    public static function sendWelcomeSms($phone, $nickname) {
        $message = "[íƒ‘ë§ˆì¼€íŒ…] {$nickname}ë‹˜, íšŒì›ê°€ì…ì„ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰ https://www.topmktx.com";
        return self::sendSms($phone, $message);
    }
    
    /**
     * ì „í™”ë²ˆí˜¸ í¬ë§·íŒ…
     */
    public static function formatPhone($phone) {
        $phone = preg_replace('/[^0-9]/', '', $phone);
        
        if (strlen($phone) === 11 && substr($phone, 0, 3) === '010') {
            return $phone;
        }
        
        if (strlen($phone) === 10) {
            return '0' . $phone;
        }
        
        return $phone;
    }
    
    /**
     * API ìš”ì²­ ì „ì†¡
     */
    private static function sendRequest($data) {
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, self::$config['aligo']['base_url']);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data));
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        
        $response = curl_exec($ch);
        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);
        
        if ($httpCode !== 200) {
            throw new Exception("SMS API ì˜¤ë¥˜: HTTP $httpCode");
        }
        
        $result = json_decode($response, true);
        
        if (!$result || $result['result_code'] !== '1') {
            throw new Exception("SMS ë°œì†¡ ì‹¤íŒ¨: " . ($result['message'] ?? 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
        }
        
        return [
            'success' => true,
            'message_id' => $result['msg_id'] ?? null,
            'result' => $result
        ];
    }
}
```

#### ì‚¬ìš© ì˜ˆì‹œ
```php
// ì¸ì¦ë²ˆí˜¸ ë°œì†¡
try {
    SmsHelper::init();
    $result = SmsHelper::sendAuthCodeSms('010-1234-5678', '123456');
    
    if ($result['success']) {
        echo "SMS ë°œì†¡ ì„±ê³µ: " . $result['message_id'];
    }
} catch (Exception $e) {
    echo "SMS ë°œì†¡ ì‹¤íŒ¨: " . $e->getMessage();
}
```

---

## 3. reCAPTCHA v3

### ğŸ›¡ï¸ Google reCAPTCHA v3 ì„¤ì •

#### ì„¤ì • íŒŒì¼
```php
// src/config/recaptcha.php
return [
    'site_key' => 'your_recaptcha_site_key',
    'secret_key' => 'your_recaptcha_secret_key',
    'threshold' => 0.5,  // ìŠ¤íŒ¸ íŒì • ì„ê³„ê°’ (0.0 ~ 1.0)
    'timeout' => 10,     // API íƒ€ì„ì•„ì›ƒ (ì´ˆ)
];
```

#### í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ (React)
```typescript
// RecaptchaProvider.tsx
import React, { createContext, useContext, useEffect, useState } from 'react';

interface RecaptchaContextType {
  executeRecaptcha: (action: string) => Promise<string>;
  isLoaded: boolean;
}

const RecaptchaContext = createContext<RecaptchaContextType | null>(null);

export const RecaptchaProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [isLoaded, setIsLoaded] = useState(false);

  useEffect(() => {
    const loadRecaptcha = () => {
      const script = document.createElement('script');
      script.src = `https://www.google.com/recaptcha/api.js?render=${process.env.REACT_APP_RECAPTCHA_SITE_KEY}`;
      script.onload = () => setIsLoaded(true);
      document.head.appendChild(script);
    };

    if (!window.grecaptcha) {
      loadRecaptcha();
    } else {
      setIsLoaded(true);
    }
  }, []);

  const executeRecaptcha = async (action: string): Promise<string> => {
    if (!isLoaded || !window.grecaptcha) {
      throw new Error('reCAPTCHAê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
    }

    return new Promise((resolve, reject) => {
      window.grecaptcha.ready(() => {
        window.grecaptcha
          .execute(process.env.REACT_APP_RECAPTCHA_SITE_KEY!, { action })
          .then(resolve)
          .catch(reject);
      });
    });
  };

  return (
    <RecaptchaContext.Provider value={{ executeRecaptcha, isLoaded }}>
      {children}
    </RecaptchaContext.Provider>
  );
};

export const useRecaptcha = () => {
  const context = useContext(RecaptchaContext);
  if (!context) {
    throw new Error('useRecaptcha must be used within RecaptchaProvider');
  }
  return context;
};
```

#### ë°±ì—”ë“œ ê²€ì¦
```php
// src/helpers/RecaptchaHelper.php
class RecaptchaHelper {
    private static $config;
    
    public static function init() {
        self::$config = require_once __DIR__ . '/../config/recaptcha.php';
    }
    
    /**
     * reCAPTCHA í† í° ê²€ì¦
     */
    public static function verify($token, $action = null) {
        if (empty($token)) {
            return [
                'success' => false,
                'error' => 'reCAPTCHA í† í°ì´ ì—†ìŠµë‹ˆë‹¤.'
            ];
        }
        
        $data = [
            'secret' => self::$config['secret_key'],
            'response' => $token,
            'remoteip' => $_SERVER['REMOTE_ADDR'] ?? null
        ];
        
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, 'https://www.google.com/recaptcha/api/siteverify');
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data));
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_TIMEOUT, self::$config['timeout']);
        
        $response = curl_exec($ch);
        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);
        
        if ($httpCode !== 200) {
            return [
                'success' => false,
                'error' => 'reCAPTCHA API ì˜¤ë¥˜'
            ];
        }
        
        $result = json_decode($response, true);
        
        if (!$result['success']) {
            return [
                'success' => false,
                'error' => 'reCAPTCHA ê²€ì¦ ì‹¤íŒ¨',
                'error_codes' => $result['error-codes'] ?? []
            ];
        }
        
        // ìŠ¤ì½”ì–´ í™•ì¸ (v3 ì „ìš©)
        if (isset($result['score'])) {
            if ($result['score'] < self::$config['threshold']) {
                return [
                    'success' => false,
                    'error' => 'ìŠ¤íŒ¸ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤.',
                    'score' => $result['score']
                ];
            }
        }
        
        // ì•¡ì…˜ í™•ì¸
        if ($action && isset($result['action']) && $result['action'] !== $action) {
            return [
                'success' => false,
                'error' => 'ì˜ëª»ëœ ì•¡ì…˜ì…ë‹ˆë‹¤.'
            ];
        }
        
        return [
            'success' => true,
            'score' => $result['score'] ?? null,
            'action' => $result['action'] ?? null
        ];
    }
}
```

---

## 4. ë„¤ì´ë²„ ì§€ë„ API

### ğŸ—ºï¸ ë„¤ì´ë²„ ì§€ë„ API ì—°ë™

#### ì„¤ì • íŒŒì¼
```php
// src/config/map.php
return [
    'naver' => [
        'client_id' => 'your_naver_client_id',
        'client_secret' => 'your_naver_client_secret',
        'map_id' => 'your_naver_map_id'
    ]
];
```

#### React ì§€ë„ ì»´í¬ë„ŒíŠ¸
```typescript
// components/map/NaverMap.tsx
import React, { useEffect, useRef } from 'react';

interface NaverMapProps {
  center: { lat: number; lng: number };
  zoom?: number;
  markers?: Array<{
    lat: number;
    lng: number;
    title: string;
    content?: string;
  }>;
  onMapClick?: (coord: { lat: number; lng: number }) => void;
}

const NaverMap: React.FC<NaverMapProps> = ({
  center,
  zoom = 15,
  markers = [],
  onMapClick
}) => {
  const mapRef = useRef<HTMLDivElement>(null);
  const mapInstanceRef = useRef<any>(null);
  const markersRef = useRef<any[]>([]);

  useEffect(() => {
    if (!mapRef.current) return;

    // ë„¤ì´ë²„ ì§€ë„ ì´ˆê¸°í™”
    const mapOptions = {
      center: new window.naver.maps.LatLng(center.lat, center.lng),
      zoom: zoom,
      mapTypeControl: true,
      mapTypeControlOptions: {
        style: window.naver.maps.MapTypeControlStyle.BUTTON,
        position: window.naver.maps.Position.TOP_RIGHT
      },
      zoomControl: true,
      zoomControlOptions: {
        style: window.naver.maps.ZoomControlStyle.SMALL,
        position: window.naver.maps.Position.RIGHT_CENTER
      }
    };

    const map = new window.naver.maps.Map(mapRef.current, mapOptions);
    mapInstanceRef.current = map;

    // ì§€ë„ í´ë¦­ ì´ë²¤íŠ¸
    if (onMapClick) {
      window.naver.maps.Event.addListener(map, 'click', (e: any) => {
        const coord = e.coord;
        onMapClick({
          lat: coord.lat(),
          lng: coord.lng()
        });
      });
    }

    return () => {
      if (mapInstanceRef.current) {
        mapInstanceRef.current.destroy();
      }
    };
  }, [center.lat, center.lng, zoom, onMapClick]);

  // ë§ˆì»¤ ì—…ë°ì´íŠ¸
  useEffect(() => {
    if (!mapInstanceRef.current) return;

    // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
    markersRef.current.forEach(marker => marker.setMap(null));
    markersRef.current = [];

    // ìƒˆ ë§ˆì»¤ ì¶”ê°€
    markers.forEach(markerData => {
      const marker = new window.naver.maps.Marker({
        position: new window.naver.maps.LatLng(markerData.lat, markerData.lng),
        map: mapInstanceRef.current,
        title: markerData.title
      });

      markersRef.current.push(marker);

      // ì •ë³´ì°½ ì¶”ê°€
      if (markerData.content) {
        const infoWindow = new window.naver.maps.InfoWindow({
          content: `<div style="padding:10px;min-width:200px;">${markerData.content}</div>`
        });

        window.naver.maps.Event.addListener(marker, 'click', () => {
          if (infoWindow.getMap()) {
            infoWindow.close();
          } else {
            infoWindow.open(mapInstanceRef.current, marker);
          }
        });
      }
    });
  }, [markers]);

  return (
    <div 
      ref={mapRef} 
      className="w-full h-96 border border-gray-300 rounded-lg"
    />
  );
};

export default NaverMap;
```

#### ì§€ë„ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”
```typescript
// utils/loadNaverMapScript.ts
let isLoaded = false;
let isLoading = false;

export const loadNaverMapScript = (): Promise<void> => {
  if (isLoaded) {
    return Promise.resolve();
  }

  if (isLoading) {
    return new Promise((resolve) => {
      const checkLoaded = () => {
        if (isLoaded) {
          resolve();
        } else {
          setTimeout(checkLoaded, 100);
        }
      };
      checkLoaded();
    });
  }

  isLoading = true;

  return new Promise((resolve, reject) => {
    const script = document.createElement('script');
    script.src = `https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${process.env.REACT_APP_NAVER_CLIENT_ID}`;
    script.onload = () => {
      isLoaded = true;
      isLoading = false;
      resolve();
    };
    script.onerror = () => {
      isLoading = false;
      reject(new Error('ë„¤ì´ë²„ ì§€ë„ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨'));
    };
    document.head.appendChild(script);
  });
};
```

---

## 5. ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ API

### ğŸ“ ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ ì—°ë™

#### ì„¤ì • íŒŒì¼
```php
// src/config/address.php
return [
    'kakao' => [
        'rest_api_key' => 'your_kakao_rest_api_key',
        'javascript_key' => 'your_kakao_javascript_key'
    ]
];
```

#### React ì£¼ì†Œ ê²€ìƒ‰ ì»´í¬ë„ŒíŠ¸
```typescript
// components/address/AddressSearch.tsx
import React, { useState } from 'react';

interface AddressSearchProps {
  onAddressSelect: (address: {
    address: string;
    roadAddress: string;
    zonecode: string;
    lat: number;
    lng: number;
  }) => void;
}

const AddressSearch: React.FC<AddressSearchProps> = ({ onAddressSelect }) => {
  const [isOpen, setIsOpen] = useState(false);

  const openAddressSearch = () => {
    if (!window.daum) {
      console.error('ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ APIê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
      return;
    }

    new window.daum.Postcode({
      oncomplete: async (data: any) => {
        // ì¢Œí‘œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const coords = await getCoordinates(data.address);
        
        onAddressSelect({
          address: data.address,
          roadAddress: data.roadAddress || data.address,
          zonecode: data.zonecode,
          lat: coords.lat,
          lng: coords.lng
        });
        
        setIsOpen(false);
      },
      onclose: () => setIsOpen(false),
      width: '100%',
      height: '100%'
    }).open();
    
    setIsOpen(true);
  };

  // ì¢Œí‘œ ë³€í™˜ í•¨ìˆ˜
  const getCoordinates = async (address: string) => {
    try {
      const response = await fetch(`/api/address/coordinates?address=${encodeURIComponent(address)}`);
      const data = await response.json();
      
      if (data.success && data.coordinates) {
        return data.coordinates;
      }
    } catch (error) {
      console.error('ì¢Œí‘œ ë³€í™˜ ì‹¤íŒ¨:', error);
    }
    
    // ê¸°ë³¸ê°’ ë°˜í™˜ (ì„œìš¸ì‹œì²­)
    return { lat: 37.5663, lng: 126.9779 };
  };

  return (
    <div>
      <button
        type="button"
        onClick={openAddressSearch}
        className="w-full px-4 py-2 text-left border border-gray-300 rounded-lg hover:border-blue-500 focus:outline-none focus:border-blue-500"
      >
        ğŸ” ì£¼ì†Œ ê²€ìƒ‰
      </button>
    </div>
  );
};

export default AddressSearch;
```

#### ë°±ì—”ë“œ ì¢Œí‘œ ë³€í™˜ API
```php
// src/controllers/AddressController.php
class AddressController {
    public function getCoordinates() {
        $address = $_GET['address'] ?? '';
        
        if (empty($address)) {
            ResponseHelper::jsonError('ì£¼ì†Œê°€ í•„ìš”í•©ë‹ˆë‹¤.');
            return;
        }
        
        try {
            $coordinates = $this->convertAddressToCoords($address);
            
            ResponseHelper::jsonSuccess([
                'coordinates' => $coordinates
            ]);
        } catch (Exception $e) {
            ResponseHelper::jsonError('ì¢Œí‘œ ë³€í™˜ ì‹¤íŒ¨: ' . $e->getMessage());
        }
    }
    
    private function convertAddressToCoords($address) {
        $config = require_once __DIR__ . '/../config/address.php';
        $apiKey = $config['kakao']['rest_api_key'];
        
        $url = 'https://dapi.kakao.com/v2/local/search/address.json';
        $data = [
            'query' => $address,
            'size' => 1
        ];
        
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url . '?' . http_build_query($data));
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HTTPHEADER, [
            'Authorization: KakaoAK ' . $apiKey
        ]);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        
        $response = curl_exec($ch);
        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);
        
        if ($httpCode !== 200) {
            throw new Exception('ì¹´ì¹´ì˜¤ API ì˜¤ë¥˜: HTTP ' . $httpCode);
        }
        
        $result = json_decode($response, true);
        
        if (empty($result['documents'])) {
            throw new Exception('ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
        
        $document = $result['documents'][0];
        
        return [
            'lat' => (float) $document['y'],
            'lng' => (float) $document['x']
        ];
    }
}
```

---

## 6. Firebase ì‹¤ì‹œê°„ ì±„íŒ…

### ğŸ”¥ Firebase ì„¤ì •

#### Firebase ì„¤ì • íŒŒì¼
```typescript
// src/services/firebase.ts
import { initializeApp } from 'firebase/app';
import { getDatabase } from 'firebase/database';
import { getAuth } from 'firebase/auth';

const firebaseConfig = {
  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,
  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,
  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,
  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,
  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.REACT_APP_FIREBASE_APP_ID
};

const app = initializeApp(firebaseConfig);
export const database = getDatabase(app);
export const auth = getAuth(app);
```

#### ì±„íŒ… ì„œë¹„ìŠ¤
```typescript
// services/chatService.ts
import { database } from './firebase';
import { ref, push, onValue, off, query, orderByChild, limitToLast } from 'firebase/database';

export interface ChatMessage {
  id: string;
  userId: string;
  userNickname: string;
  message: string;
  timestamp: number;
  roomId: string;
}

class ChatService {
  /**
   * ë©”ì‹œì§€ ì „ì†¡
   */
  async sendMessage(roomId: string, userId: string, userNickname: string, message: string) {
    const messagesRef = ref(database, `chats/${roomId}/messages`);
    
    const messageData = {
      userId,
      userNickname,
      message: message.trim(),
      timestamp: Date.now()
    };
    
    await push(messagesRef, messageData);
  }
  
  /**
   * ë©”ì‹œì§€ ì‹¤ì‹œê°„ êµ¬ë…
   */
  subscribeToMessages(roomId: string, callback: (messages: ChatMessage[]) => void) {
    const messagesRef = ref(database, `chats/${roomId}/messages`);
    const messagesQuery = query(
      messagesRef,
      orderByChild('timestamp'),
      limitToLast(50)
    );
    
    const unsubscribe = onValue(messagesQuery, (snapshot) => {
      const messages: ChatMessage[] = [];
      
      snapshot.forEach((childSnapshot) => {
        const messageData = childSnapshot.val();
        messages.push({
          id: childSnapshot.key!,
          ...messageData
        });
      });
      
      callback(messages);
    });
    
    return () => off(messagesQuery, 'value', unsubscribe);
  }
  
  /**
   * ì±„íŒ…ë°© ìƒì„± ë˜ëŠ” ì°¸ì—¬
   */
  async joinRoom(roomId: string, userId: string, userNickname: string) {
    const roomRef = ref(database, `chats/${roomId}/participants/${userId}`);
    
    await push(roomRef, {
      nickname: userNickname,
      joinedAt: Date.now(),
      lastSeen: Date.now()
    });
  }
}

export const chatService = new ChatService();
```

---

## 7. Google Analytics

### ğŸ“Š Google Analytics 4 ì„¤ì •

#### GA4 ì„¤ì •
```typescript
// utils/analytics.ts
declare global {
  interface Window {
    gtag: (...args: any[]) => void;
  }
}

class Analytics {
  private initialized = false;
  
  /**
   * GA4 ì´ˆê¸°í™”
   */
  init(measurementId: string) {
    if (this.initialized) return;
    
    // GA4 ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
    const script1 = document.createElement('script');
    script1.async = true;
    script1.src = `https://www.googletagmanager.com/gtag/js?id=${measurementId}`;
    document.head.appendChild(script1);
    
    // GA4 ì„¤ì •
    const script2 = document.createElement('script');
    script2.innerHTML = `
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '${measurementId}');
    `;
    document.head.appendChild(script2);
    
    this.initialized = true;
  }
  
  /**
   * í˜ì´ì§€ ë·° ì¶”ì 
   */
  trackPageView(pagePath: string, pageTitle?: string) {
    if (typeof window.gtag === 'function') {
      window.gtag('config', process.env.REACT_APP_GA_MEASUREMENT_ID!, {
        page_path: pagePath,
        page_title: pageTitle
      });
    }
  }
  
  /**
   * ì´ë²¤íŠ¸ ì¶”ì 
   */
  trackEvent(eventName: string, parameters?: Record<string, any>) {
    if (typeof window.gtag === 'function') {
      window.gtag('event', eventName, parameters);
    }
  }
  
  /**
   * ì‚¬ìš©ì ì†ì„± ì„¤ì •
   */
  setUserProperty(propertyName: string, value: string) {
    if (typeof window.gtag === 'function') {
      window.gtag('config', process.env.REACT_APP_GA_MEASUREMENT_ID!, {
        custom_map: {
          [propertyName]: value
        }
      });
    }
  }
}

export const analytics = new Analytics();

// ì¼ë°˜ì ì¸ ì´ë²¤íŠ¸ ì¶”ì  í—¬í¼
export const trackUserAction = (action: string, category: string, label?: string) => {
  analytics.trackEvent(action, {
    event_category: category,
    event_label: label
  });
};

export const trackPageView = (pageName: string) => {
  analytics.trackPageView(window.location.pathname, pageName);
};
```

---

## 8. ì´ë©”ì¼ ì„œë¹„ìŠ¤

### ğŸ“§ ì´ë©”ì¼ ë°œì†¡ ì„œë¹„ìŠ¤ (ê³„íš)

#### SMTP ì„¤ì •
```php
// src/config/mail.php
return [
    'smtp' => [
        'host' => 'smtp.gmail.com',
        'port' => 587,
        'encryption' => 'tls',
        'username' => 'your_email@gmail.com',
        'password' => 'your_app_password',
        'from_email' => 'noreply@topmktx.com',
        'from_name' => 'íƒ‘ë§ˆì¼€íŒ…'
    ]
];
```

#### ì´ë©”ì¼ í—¬í¼ í´ë˜ìŠ¤
```php
// src/helpers/MailHelper.php
class MailHelper {
    private static $config;
    
    public static function init() {
        self::$config = require_once __DIR__ . '/../config/mail.php';
    }
    
    /**
     * ì´ë©”ì¼ ë°œì†¡
     */
    public static function sendMail($to, $subject, $body, $isHtml = true) {
        // PHPMailer ë˜ëŠ” SwiftMailer ì‚¬ìš©
        // êµ¬í˜„ ì˜ˆì •
    }
    
    /**
     * íšŒì›ê°€ì… í™˜ì˜ ì´ë©”ì¼
     */
    public static function sendWelcomeEmail($email, $nickname) {
        $subject = 'íƒ‘ë§ˆì¼€íŒ…ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!';
        $body = self::getWelcomeEmailTemplate($nickname);
        
        return self::sendMail($email, $subject, $body);
    }
    
    /**
     * ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì´ë©”ì¼
     */
    public static function sendPasswordResetEmail($email, $resetToken) {
        $subject = 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­';
        $body = self::getPasswordResetTemplate($resetToken);
        
        return self::sendMail($email, $subject, $body);
    }
}
```

---

## 9. íŒŒì¼ ì €ì¥ì†Œ

### â˜ï¸ í´ë¼ìš°ë“œ ì €ì¥ì†Œ ì—°ë™ (ê³„íš)

#### AWS S3 ì„¤ì •
```php
// src/config/storage.php
return [
    's3' => [
        'key' => 'your_aws_access_key',
        'secret' => 'your_aws_secret_key',
        'region' => 'ap-northeast-2',
        'bucket' => 'topmkt-uploads',
        'url' => 'https://topmkt-uploads.s3.ap-northeast-2.amazonaws.com'
    ]
];
```

---

## 10. ëª¨ë‹ˆí„°ë§ ë„êµ¬

### ğŸ“ˆ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (ê³„íš)

#### Sentry ì—ëŸ¬ ì¶”ì 
```typescript
// utils/sentry.ts
import * as Sentry from '@sentry/react';

export const initSentry = () => {
  Sentry.init({
    dsn: process.env.REACT_APP_SENTRY_DSN,
    environment: process.env.NODE_ENV,
    tracesSampleRate: 1.0
  });
};

export const captureError = (error: Error, context?: Record<string, any>) => {
  Sentry.captureException(error, { extra: context });
};
```

---

## ğŸ¯ ì—°ë™ ìƒíƒœ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… í˜„ì¬ ìš´ì˜ ì¤‘
- [ ] ì•Œë¦¬ê³  SMS API ì •ìƒ ì‘ë™
- [ ] reCAPTCHA v3 ìŠ¤íŒ¸ ë°©ì§€ í™œì„±í™”
- [ ] ë„¤ì´ë²„ ì§€ë„ API ì •ìƒ í‘œì‹œ
- [ ] ì¹´ì¹´ì˜¤ ì£¼ì†Œ ê²€ìƒ‰ ì •ìƒ ì‘ë™
- [ ] Firebase ì‹¤ì‹œê°„ ì±„íŒ… ìš´ì˜

### ğŸ”„ ì„¤ì • ì§„í–‰ ì¤‘
- [ ] Google Analytics 4 ë°ì´í„° ìˆ˜ì§‘
- [ ] ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ë„êµ¬ ì—°ë™

### ğŸ“‹ í–¥í›„ ê³„íš
- [ ] ì´ë©”ì¼ ë°œì†¡ ì„œë¹„ìŠ¤ êµ¬ì¶•
- [ ] í´ë¼ìš°ë“œ íŒŒì¼ ì €ì¥ì†Œ ì—°ë™
- [ ] ì—ëŸ¬ ì¶”ì  ì‹œìŠ¤í…œ ë„ì…

---

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

### ğŸ†˜ API ê´€ë ¨ ë¬¸ì˜
- **ê¸°ìˆ  ì§€ì›**: api@topmktx.com
- **ê²°ì œ ë¬¸ì˜**: billing@topmktx.com
- **ë³´ì•ˆ ë¬¸ì œ**: security@topmktx.com

### ğŸ“š ê´€ë ¨ ë¬¸ì„œ
- [ë³´ì•ˆ ê°€ì´ë“œ](17.ë³´ì•ˆ_ê°€ì´ë“œ.md)
- [ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ](15.ì„±ëŠ¥_ìµœì í™”_ê°€ì´ë“œ.md)
- [React ê°œë°œ ê°€ì´ë“œ](12.React_ê°œë°œ_ê°€ì´ë“œ.md)

---

*ğŸ“ ë¬¸ì„œ ì‘ì„±ì: API ì—°ë™íŒ€*  
*ğŸ“§ ë¬¸ì˜: integration@topmktx.com*  
*ğŸ”„ ì—…ë°ì´íŠ¸: ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì—°ë™ ì‹œ*