# 탑마케팅 코딩 컨벤션 / 스타일 가이드

**최종 수정일:** 2025-05-31 12:00:00 KST

---

## 목차
1. [일반 규칙](#일반-규칙)  
2. [PHP 스타일 가이드](#php-스타일-가이드)  
3. [HTML/CSS/JavaScript 가이드](#htmlcssjavascript-가이드)  
4. [네이밍 규칙](#네이밍-규칙)  
5. [보안 코딩 지침](#보안-코딩-지침)  
6. [성능 최적화 지침](#성능-최적화-지침)  
7. [주석 및 문서화](#주석-및-문서화)

---

## 일반 규칙
- **버전 관리:** Git 사용 (Gitflow 또는 GitHub Flow)  
- **인코딩:** 모든 파일은 UTF-8 (BOM 없음)  
- **탭/스페이스:** 4 스페이스 들여쓰기, 탭 금지  
- **최대 줄 길이:** 120자 (PSR-12 기준)  
- **줄 끝:** Unix 스타일 LF (`
`)  

---

## PHP 스타일 가이드
- **PSR-12** 코딩 표준 준수  
- **파일 헤더:**  
  - `<?php` 태그 다음 줄에 한 줄 공백  
  - 파일 마지막은 개행으로 끝나야 함  
- **네임스페이스 & use**  
  - 네임스페이스 선언 다음에는 한 줄 공백  
  - `use` 구문은 그룹화하여 한 줄 공백 없음  
- **클래스 & 메서드**  
  - 클래스명: PascalCase  
  - 메서드명: camelCase  
  - 속성 & 메서드 접근 제한자 항상 명시 (`public`, `protected`, `private`)  
  - 메서드와 메서드 사이에는 한 줄 공백  

---

## HTML/CSS/JavaScript 가이드
- **HTML**  
  - **문서 구조:** `<!DOCTYPE html>`, `<html lang="ko">`, `<head>`, `<body>`  
  - **들여쓰기:** 2 스페이스(HTML), 4 스페이스(PHP 템플릿)  
  - **속성 순서:** `id`, `class`, `src`, `href`, `alt`, `title`, `role`, `aria-*`  
- **CSS**  
  - **파일 분리:** 페이지별 아닌 컴포넌트별로 분리  
  - **네이밍:** BEM(Block__Element--Modifier) 규칙 사용  
  - **들여쓰기:** 2 스페이스  
  - **단위:** `rem` 우선, 필요 시 `px`, `em` 사용  
  - **중복 방지:** 공통 스타일은 변수/맴폴더에 정의 (SCSS 사용 권장)  
- **JavaScript**  
  - **ES6 모던 문법** 사용 (`let`, `const`, 템플릿 문자열 등)  
  - **들여쓰기:** 2 스페이스  
  - **세미콜론:** 필수 (`;`)  
  - **화살표 함수** 사용 권장, 콜백 시 `function` 사용  
  - **모듈화:** `import` / `export` 사용, 번들러(Webpack 등) 환경 가정  
  - **비동기 처리:** `async` / `await` 사용 권장  

---

## 네이밍 규칙
- **파일/디렉토리:** 소문자, 단어 구분 시 하이픈(`-`) 사용 (예: `user-profile.php`, `post-list.js`)  
- **클래스:** PascalCase (예: `UserController`, `PostModel`)  
- **메서드 / 함수:** camelCase (예: `getUserById()`, `createPost()`)  
- **변수:** snake_case (예: `$user_id`, `$post_count`)  
- **상수:** UPPER_SNAKE_CASE (예: `MAX_UPLOAD_SIZE`)  
- **테이블명 / 컬럼명:** snake_case (예: `user_profiles`, `created_at`)  

---

## 보안 코딩 지침
- **입력 검증:**  
  - **서버 측:** `filter_var`, `preg_match` 등 사용하여 유효성 검증  
  - **클라이언트 측:** 간단한 유효성 검사만 수행, 서버에서 반드시 재검증  
- **출력 인코딩:**  
  - HTML 출력 시 `htmlspecialchars($value, ENT_QUOTES, 'UTF-8')` 사용  
  - JavaScript 변수 출력 시 `json_encode()` 사용  
- **SQL 인젝션 방지:** Prepared Statement / PDO 사용, 직접 쿼리 문자열 조합 금지  
- **XSS 방지:** 사용자 입력을 반영할 때 반드시 인코딩 처리  
- **CSRF 방지:**  
  - 모든 폼 제출 시 CSRF 토큰 포함, 검증 로직 구현  
  - 토큰은 세션 기반으로 저장, `$_SESSION['csrf_token']`  
- **세션 보안:**  
  - 세션 쿠키 속성: `HttpOnly; Secure; SameSite=Strict`  
  - 로그인 후 `session_regenerate_id(true)` 호출하여 세션 하이재킹 방지  
  - 세션 타임아웃: 30분 미사용 시 자동 만료  

---

## 성능 최적화 지침
- **쿼리 최적화:**  
  - 필요한 컬럼만 선택, `SELECT *` 사용 금지  
  - 인덱스 활용, 불필요한 인덱스 제거  
  - 대용량 작업 시 배치 처리 또는 파티셔닝 고려  
- **캐싱:**  
  - 페이지별 캐시, 객체 캐싱(Redis, Memcached) 활용  
  - HTTP 헤더 캐시 제어 (Cache-Control, ETag 등)  
- **파일 로딩:**  
  - CSS / JS 번들링 및 압축, 이미지 최적화 (WebP 등)  
  - 지연 로딩 (Lazy Load) 적용, 필요 시 CDN 사용  
- **비동기 처리:**  
  - AJAX 요청 최소화, 배치 요청으로 합치기  
  - 프론트엔드: Debounce / Throttle 적용  

---

## 주석 및 문서화
- **PHPDoc** 사용:  
  - 클래스, 메서드 위에 `/** ... */` 형식으로 주석 작성  
  - 매개변수(`@param`), 반환값(`@return`), 예외(`@throws`) 명시  
- **TODO / FIXME 태그**:  
  - TODO: 추후 개선 / 추가 작업 필요 부분  
  - FIXME: 버그 수정해야 할 부분  
- **문서화 툴**:  
  - PHP: phpDocumentor 또는 Doxygen 권장  
  - JavaScript: JSDoc 사용 권장  
