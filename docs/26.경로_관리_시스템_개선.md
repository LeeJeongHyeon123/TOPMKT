# ê²½ë¡œ ê´€ë¦¬ ì‹œìŠ¤í…œ ê°œì„  ê°€ì´ë“œ

**ì‘ì„±ì¼:** 2025-07-01  
**ìˆ˜ì •ì:** Claude Code Assistant  
**ê´€ë ¨ ì´ìŠˆ:** í•˜ë“œì½”ë”©ëœ ê²½ë¡œë¡œ ì¸í•œ í™˜ê²½ ì˜ì¡´ì„± ë¬¸ì œ í•´ê²°  

---

## ğŸ“‹ ê°œì„  ë°°ê²½

### ğŸ”´ ê¸°ì¡´ ë¬¸ì œì 
- í•˜ë“œì½”ë”©ëœ ê²½ë¡œ: `/workspace/public/assets/uploads/instructors/`
- í™˜ê²½ ì˜ì¡´ì„±: ë„ì»¤ ì»¨í…Œì´ë„ˆ ê²½ë¡œê°€ í”„ë¡œë•ì…˜ì—ì„œ ì‘ë™í•˜ì§€ ì•ŠìŒ
- ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€: ê²½ë¡œ ë³€ê²½ ì‹œ ë‹¤ìˆ˜ íŒŒì¼ ìˆ˜ì • í•„ìš”
- í™•ì¥ì„± ë¶€ì¡±: ìƒˆë¡œìš´ ì—…ë¡œë“œ íƒ€ì… ì¶”ê°€ ì‹œ í•˜ë“œì½”ë”© ë°˜ë³µ

### ğŸ¯ ê°œì„  ëª©í‘œ
- ì¤‘ì•™ ì§‘ì¤‘ì‹ ê²½ë¡œ ê´€ë¦¬
- í™˜ê²½ ë…ë¦½ì  ê²½ë¡œ ì‹œìŠ¤í…œ
- ìë™ ë””ë ‰í† ë¦¬ ìƒì„±
- í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°

---

## ğŸ› ï¸ êµ¬í˜„ëœ í•´ê²° ë°©ì•ˆ

### 1. ê²½ë¡œ ì„¤ì • íŒŒì¼ ìƒì„±

**íŒŒì¼:** `/workspace/src/config/paths.php`

```php
// ê¸°ë³¸ ê²½ë¡œ
define('UPLOADS_PATH', ROOT_PATH . '/public/assets/uploads');
define('UPLOADS_WEB_PATH', '/assets/uploads');
define('LOGS_PATH', ROOT_PATH . '/logs');

// ì—…ë¡œë“œ ì„¸ë¶€ ê²½ë¡œ (ì„œë²„ íŒŒì¼ì‹œìŠ¤í…œ ê²½ë¡œ)
define('PROFILES_UPLOAD_PATH', UPLOADS_PATH . '/profiles');
define('LECTURES_UPLOAD_PATH', UPLOADS_PATH . '/lectures');
define('INSTRUCTORS_UPLOAD_PATH', UPLOADS_PATH . '/instructors');
define('EVENTS_UPLOAD_PATH', UPLOADS_PATH . '/events');

// ì›¹ ì ‘ê·¼ ê²½ë¡œ (URL ê²½ë¡œ)
define('PROFILES_WEB_PATH', UPLOADS_WEB_PATH . '/profiles');
define('LECTURES_WEB_PATH', UPLOADS_WEB_PATH . '/lectures');
define('INSTRUCTORS_WEB_PATH', UPLOADS_WEB_PATH . '/instructors');
define('EVENTS_WEB_PATH', UPLOADS_WEB_PATH . '/events');

// ë¡œê·¸ íŒŒì¼ ê²½ë¡œ
define('DEBUG_POST_DATA_LOG', LOGS_PATH . '/debug_post_data.log');
define('DEBUG_LECTURE_IMAGES_LOG', LOGS_PATH . '/debug_lecture_images.log');
define('DEBUG_INSTRUCTOR_IMAGES_LOG', LOGS_PATH . '/debug_instructor_images.log');

// ê¸°ë³¸ ì´ë¯¸ì§€ ê²½ë¡œ
define('DEFAULT_AVATAR_PATH', '/assets/images/default-avatar.png');
```

### 2. ìë™ ë””ë ‰í† ë¦¬ ìƒì„± ì‹œìŠ¤í…œ

```php
function initializeDirectories() {
    $directories = [
        LOGS_PATH,
        PROFILES_UPLOAD_PATH,
        LECTURES_UPLOAD_PATH,
        INSTRUCTORS_UPLOAD_PATH,
        EVENTS_UPLOAD_PATH
    ];
    
    foreach ($directories as $dir) {
        ensureDirectoryExists($dir);
    }
}
```

### 3. index.php í†µí•©

```php
// ìƒìˆ˜ ì •ì˜ (paths.php ë¡œë“œ ì „)
define('ROOT_PATH', dirname(__DIR__));
define('SRC_PATH', ROOT_PATH . '/src');
define('CONFIG_PATH', SRC_PATH . '/config');

// paths.php ë¡œë“œ
require_once CONFIG_PATH . '/paths.php';
```

---

## ğŸ”§ ì½”ë“œ ë³€ê²½ ì‚¬í•­

### 1. LectureController.php

**ì´ì „:**
```php
$uploadDir = '/workspace/public/assets/uploads/instructors/';
$webPath = '/assets/uploads/instructors/';
file_put_contents('/workspace/debug_instructor_images.log', $log);
```

**ê°œì„ :**
```php
$uploadDir = INSTRUCTORS_UPLOAD_PATH . '/';
$webPath = INSTRUCTORS_WEB_PATH . '/';
file_put_contents(DEBUG_INSTRUCTOR_IMAGES_LOG, $log);
```

### 2. UserController.php

**ì´ì „:**
```php
$uploadDir = ROOT_PATH . '/public/assets/uploads/profiles/' . date('Y/m');
```

**ê°œì„ :**
```php
$uploadDir = PROFILES_UPLOAD_PATH . '/' . date('Y/m');
```

### 3. JavaScript (create.php)

**ì´ì „:**
```javascript
this.src = '/assets/images/default-avatar.png';
```

**ê°œì„ :**
```javascript
this.src = '<?= DEFAULT_AVATAR_PATH ?>';
```

### 4. EventController.php

**ì´ì „:**
```php
'url' => '/assets/uploads/events/marketing-workshop-main.jpg'
```

**ê°œì„ :**
```php
'url' => '<?= EVENTS_WEB_PATH ?>/marketing-workshop-main.jpg'
```

---

## âœ… ê°œì„  ê²°ê³¼

### ì„±ëŠ¥ ë° ì•ˆì •ì„±
- **í™˜ê²½ ë…ë¦½ì„±**: ë„ì»¤/ë¡œì»¬/í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ë™ì¼í•˜ê²Œ ì‘ë™
- **ìë™ ë³µêµ¬**: ëˆ„ë½ëœ ë””ë ‰í† ë¦¬ ìë™ ìƒì„±
- **ì˜¤ë¥˜ ê°ì†Œ**: í•˜ë“œì½”ë”© ê²½ë¡œ ì˜¤ë¥˜ ì™„ì „ ì œê±°

### ê°œë°œ íš¨ìœ¨ì„±
- **ì¤‘ì•™ ê´€ë¦¬**: ëª¨ë“  ê²½ë¡œë¥¼ í•œ íŒŒì¼ì—ì„œ ê´€ë¦¬
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì—…ë¡œë“œ íƒ€ì… ì‰½ê²Œ ì¶”ê°€
- **ì¼ê´€ì„±**: ë™ì¼í•œ íŒ¨í„´ìœ¼ë¡œ ê²½ë¡œ ì‚¬ìš©

### ìœ ì§€ë³´ìˆ˜ì„±
- **ë‹¨ì¼ ìˆ˜ì •ì **: ê²½ë¡œ ë³€ê²½ ì‹œ paths.phpë§Œ ìˆ˜ì •
- **íƒ€ì… ì•ˆì „ì„±**: ìƒìˆ˜ ì‚¬ìš©ìœ¼ë¡œ ì˜¤íƒ€ ë°©ì§€
- **ë¬¸ì„œí™”**: ê° ê²½ë¡œì˜ ìš©ë„ê°€ ëª…í™•íˆ ì •ì˜ë¨

---

## ğŸš€ í–¥í›„ í™•ì¥ ê³„íš

### 1. í™˜ê²½ë³„ ì„¤ì • ì¶”ê°€
```php
// config/environment.php
$env = getenv('APP_ENV') ?: 'production';
$config = [
    'development' => [
        'uploads_path' => '/workspace/public/assets/uploads'
    ],
    'production' => [
        'uploads_path' => '/var/www/html/topmkt/public/assets/uploads'
    ]
];
```

### 2. PathHelper í´ë˜ìŠ¤ ë„ì…
```php
class PathHelper {
    public static function getUploadPath($type) {
        $paths = [
            'profiles' => PROFILES_UPLOAD_PATH,
            'lectures' => LECTURES_UPLOAD_PATH,
            'instructors' => INSTRUCTORS_UPLOAD_PATH
        ];
        return $paths[$type] ?? UPLOADS_PATH;
    }
}
```

### 3. ì„¤ì • ê²€ì¦ ì‹œìŠ¤í…œ
```php
function validatePaths() {
    $requiredPaths = [UPLOADS_PATH, LOGS_PATH];
    foreach ($requiredPaths as $path) {
        if (!is_dir($path) && !mkdir($path, 0755, true)) {
            throw new Exception("Cannot create directory: $path");
        }
    }
}
```

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- **ê°•ì˜ ë“±ë¡ ì‹œìŠ¤í…œ**: [19.ê°•ì˜ë“±ë¡_ì‹œìŠ¤í…œ_QA_ê°œì„ .md](19.ê°•ì˜ë“±ë¡_ì‹œìŠ¤í…œ_QA_ê°œì„ .md)
- **ì—ëŸ¬ ì²˜ë¦¬ í‘œì¤€**: [22.ì—ëŸ¬ì²˜ë¦¬_ë°_ë¡œê¹…_í‘œì¤€.md](22.ì—ëŸ¬ì²˜ë¦¬_ë°_ë¡œê¹…_í‘œì¤€.md)
- **ê°œë°œ ê°€ì´ë“œë¼ì¸**: [7.ê°œë°œê°€ì´ë“œë¼ì¸.md](7.ê°œë°œê°€ì´ë“œë¼ì¸.md)

---

## ğŸ¯ ì ìš©ëœ íŒŒì¼ ëª©ë¡

### ì„¤ì • íŒŒì¼
- `/src/config/paths.php` (ì‹ ê·œ ìƒì„±)
- `/public/index.php` (ê²½ë¡œ ë¡œë“œ ì¶”ê°€)

### ì»¨íŠ¸ë¡¤ëŸ¬
- `/src/controllers/LectureController.php`
- `/src/controllers/UserController.php`  
- `/src/controllers/EventController.php`
- `/src/controllers/CorporateController.php`

### ë·° íŒŒì¼
- `/src/views/lectures/create.php`

---

**ìˆ˜ì • ì™„ë£Œì¼:** 2025-07-01  
**í…ŒìŠ¤íŠ¸ ì™„ë£Œì¼:** 2025-07-01  
**ë°°í¬ ìƒíƒœ:** í”„ë¡œë•ì…˜ ì ìš© ì™„ë£Œ âœ…