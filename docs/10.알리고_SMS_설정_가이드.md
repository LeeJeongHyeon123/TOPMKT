# 알리고 SMS 실제 계정 설정 가이드

**최종 수정일:** 2025-06-02 20:45:00 KST

> **⚠️ 중요: 이 문서는 운영 필수 문서입니다**
> - 실제 SMS 서비스 운영을 위한 핵심 설정 가이드
> - 새로운 팀원 교육용 참고 자료
> - SMS 관련 문제 해결 시 레퍼런스 문서
> - **절대 삭제하지 마세요!**

## 🚀 실제 SMS 발송을 위한 알리고 계정 설정

Mock 모드를 제거하고 **실제 문자 발송**을 위한 완전한 설정 가이드입니다.

---

## 1. 알리고 회원가입 및 계정 설정

### 📝 1.1 회원가입
1. **알리고 웹사이트 접속**: https://smartsms.aligo.in
2. **회원가입** 클릭
3. 필요 정보 입력:
   - 회사명: 탑마케팅
   - 담당자명: [실제 이름]
   - 연락처: 010-2659-1346
   - 이메일: [실제 이메일]

### 🔑 1.2 API 키 발급
1. **로그인** 후 **마이페이지** → **API 관리**
2. **API 키 발급** 요청
3. **API 키**와 **사용자 ID** 확인 및 복사

### 📞 1.3 발신번호 등록
1. **마이페이지** → **발신번호 관리**
2. **발신번호 등록** (예: 010-2659-1346)
3. **인증 절차** 완료 (SMS 인증)
4. **승인 대기** (보통 1-2일 소요)

---

## 2. 프로젝트 설정 업데이트

### 🔧 2.1 설정 파일 수정

`src/config/config.php` 파일을 다음과 같이 수정:

```php
// 알리고 SMS API 설정
define('ALIGO_API_KEY', '실제_발급받은_API_키');       // 알리고에서 발급받은 실제 API 키
define('ALIGO_USER_ID', '실제_사용자_ID');              // 알리고 실제 사용자 ID  
define('ALIGO_SENDER', '010-2659-1346');               // 실제 등록된 발신번호
define('ALIGO_API_URL', 'https://apis.aligo.in/send/'); // 알리고 API URL
define('ALIGO_REMAIN_URL', 'https://apis.aligo.in/remain/'); // 잔여 건수 조회 URL

// SMS 실제 모드 설정
define('SMS_MOCK_MODE', false);                         // 항상 실제 발송
define('SMS_TEST_PHONE', '010-2659-1346');            // 테스트용 전화번호
```

### 💰 2.2 SMS 충전
1. **마이페이지** → **충전하기**
2. 필요한 만큼 충전:
   - SMS (단문): 건당 약 20원
   - LMS (장문): 건당 약 50원
   - MMS (그림문자): 건당 약 200원

---

## 3. 실제 테스트 실행

### ✅ 3.1 설정 완료 후 테스트

모든 설정이 완료되면 다음 명령어로 **실제 문자 발송** 테스트:

```bash
# 1. 빠른 테스트 (즉시 발송)
curl -k -X GET "https://www.topmktx.com/sms/test/quick"

# 2. 웹 테스트 페이지 접속
브라우저에서: https://www.topmktx.com/sms/test
```

### 📱 3.2 예상 결과

**성공 시 응답 예시:**
```json
{
    "success": true,
    "message": "SMS 발송이 완료되었습니다.",
    "data": {
        "result_code": "1",
        "message": "success",
        "msg_id": "202406021234567890",
        "success_cnt": 1,
        "error_cnt": 0,
        "msg_type": "SMS"
    }
}
```

**실제로 010-2659-1346에 문자 수신!**

---

## 4. 주요 API 활용법

### 📤 4.1 기본 문자 발송
```php
// 단순 발송
sendSms('010-1234-5678', '안녕하세요! 탑마케팅입니다.');

// 인증번호 발송
sendAuthCodeSms('010-1234-5678', '123456');

// 환영 메시지
sendWelcomeSms('010-1234-5678', '홍길동');
```

### 📊 4.2 발송 내역 관리
```php
// 잔여 건수 확인
$remain = getSmsRemainCount();

// 발송 결과 조회
$result = getSmsResult($msgId);

// 전화번호 검증
$isValid = isValidPhone('010-1234-5678');
```

---

## 5. 보안 및 주의사항

### 🔒 5.1 API 키 보안
- ✅ **환경변수 사용** 권장
- ✅ **GitHub에 업로드 금지**
- ✅ **주기적 키 변경**

### 💸 5.2 비용 관리
- ✅ **잔여 건수 모니터링**
- ✅ **발송 로그 관리**
- ✅ **스팸 방지 조치**

### 📋 5.3 발송 규정 준수
- ✅ **수신 동의 확인**
- ✅ **발송 시간 제한** (오전 8시~오후 9시)
- ✅ **광고 문자 표시** ([광고] 표기)

---

## 6. 문제 해결

### 🚨 6.1 자주 발생하는 오류

| 오류 코드 | 원인 | 해결 방법 |
|----------|------|----------|
| -101 | API 키 오류 | API 키 재확인 |
| -102 | 사용자 ID 오류 | 사용자 ID 재확인 |
| -103 | 발신번호 미등록 | 발신번호 등록/승인 |
| -201 | 잔액 부족 | SMS 충전 |

### 📞 6.2 고객지원
- **알리고 고객센터**: 1588-7979
- **이메일**: cs@aligo.in
- **운영시간**: 평일 9:00~18:00

---

## 7. 실제 운영 체크리스트

### ✅ 필수 확인사항
- [ ] 알리고 회원가입 완료
- [ ] API 키 발급 완료
- [ ] 발신번호 등록 및 승인 완료
- [ ] SMS 충전 완료
- [ ] 설정 파일 업데이트 완료
- [ ] 실제 테스트 발송 성공
- [ ] 010-2659-1346에 문자 수신 확인

### 🎯 최종 목표
**Mock 모드 없이 100% 실제 알리고 API를 통한 문자 발송!**

---

이제 **진짜 문자 발송 시스템**이 완성되었습니다! 🎉 